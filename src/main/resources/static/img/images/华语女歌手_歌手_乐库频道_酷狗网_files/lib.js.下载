if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();(function($){var testNode=document.createElement("input");var isInputSupported="oninput"in testNode&&(!("documentMode"in document)||document.documentMode>9);var hasInputCapabilities=function(elem){return elem.nodeName==="INPUT"&&(elem.type==="text"||elem.type==="password")};var activeElement=null;var activeElementValue=null;var activeElementValueProp=null;var newValueProp={get:function(){return activeElementValueProp.get.call(this)},set:function(val){activeElementValue=val;activeElementValueProp.set.call(this,val)}};var startWatching=function(target){activeElement=target;activeElementValue=target.value;activeElementValueProp=Object.getOwnPropertyDescriptor(target.constructor.prototype,"value");Object.defineProperty(activeElement,"value",newValueProp);activeElement.attachEvent("onpropertychange",handlePropertyChange)};var stopWatching=function(){if(!activeElement)return;delete activeElement.value;activeElement.detachEvent("onpropertychange",handlePropertyChange);activeElement=null;activeElementValue=null;activeElementValueProp=null};var handlePropertyChange=function(nativeEvent){if(nativeEvent.propertyName!=="value")return;var value=nativeEvent.srcElement.value;if(value===activeElementValue)return;activeElementValue=value;$(activeElement).trigger("textchange")};if(isInputSupported){$(document).on("input",function(e){if(e.target.nodeName!=="TEXTAREA"){$(e.target).trigger("textchange")}})}else{$(document).on("focusin",function(e){if(hasInputCapabilities(e.target)){stopWatching();startWatching(e.target)}}).on("focusout",function(){stopWatching()}).on("selectionchange keyup keydown",function(){if(activeElement&&activeElement.value!==activeElementValue){activeElementValue=activeElement.value;$(activeElement).trigger("textchange")}})}})(jQuery);(function(){function C(){var a="{}";if("userDataBehavior"==f){g.load("jStorage");try{a=g.getAttribute("jStorage")}catch(b){}try{r=g.getAttribute("jStorage_update")}catch(c){}h.jStorage=a}D();x();E()}function u(){var a;clearTimeout(F);F=setTimeout(function(){if("localStorage"==f||"globalStorage"==f)a=h.jStorage_update;else if("userDataBehavior"==f){g.load("jStorage");try{a=g.getAttribute("jStorage_update")}catch(b){}}if(a&&a!=r){r=a;var l=p.parse(p.stringify(c.__jstorage_meta.CRC32)),k;C();k=p.parse(p.stringify(c.__jstorage_meta.CRC32));var d,n=[],e=[];for(d in l)l.hasOwnProperty(d)&&(k[d]?l[d]!=k[d]&&"2."==String(l[d]).substr(0,2)&&n.push(d):e.push(d));for(d in k)k.hasOwnProperty(d)&&(l[d]||n.push(d));s(n,"updated");s(e,"deleted")}},25)}function s(a,b){a=[].concat(a||[]);var c,k,d,n;if("flushed"==b){a=[];for(c in m)m.hasOwnProperty(c)&&a.push(c);b="deleted"}c=0;for(d=a.length;c<d;c++){if(m[a[c]])for(k=0,n=m[a[c]].length;k<n;k++)m[a[c]][k](a[c],b);if(m["*"])for(k=0,n=m["*"].length;k<n;k++)m["*"][k](a[c],b)}}function v(){var a=(+new Date).toString();if("localStorage"==f||"globalStorage"==f)try{h.jStorage_update=a}catch(b){f=!1}else"userDataBehavior"==f&&(g.setAttribute("jStorage_update",a),g.save("jStorage"));u()}function D(){if(h.jStorage)try{c=p.parse(String(h.jStorage))}catch(a){h.jStorage="{}"}else h.jStorage="{}";z=h.jStorage?String(h.jStorage).length:0;c.__jstorage_meta||(c.__jstorage_meta={});c.__jstorage_meta.CRC32||(c.__jstorage_meta.CRC32={})}function w(){if(c.__jstorage_meta.PubSub){for(var a=+new Date-2e3,b=0,l=c.__jstorage_meta.PubSub.length;b<l;b++)if(c.__jstorage_meta.PubSub[b][0]<=a){c.__jstorage_meta.PubSub.splice(b,c.__jstorage_meta.PubSub.length-b);break}c.__jstorage_meta.PubSub.length||delete c.__jstorage_meta.PubSub}try{h.jStorage=p.stringify(c),g&&(g.setAttribute("jStorage",h.jStorage),g.save("jStorage")),z=h.jStorage?String(h.jStorage).length:0}catch(k){}}function q(a){if("string"!=typeof a&&"number"!=typeof a)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==a)throw new TypeError("Reserved key name");return!0}function x(){var a,b,l,k,d=Infinity,n=!1,e=[];clearTimeout(G);if(c.__jstorage_meta&&"object"==typeof c.__jstorage_meta.TTL){a=+new Date;l=c.__jstorage_meta.TTL;k=c.__jstorage_meta.CRC32;for(b in l)l.hasOwnProperty(b)&&(l[b]<=a?(delete l[b],delete k[b],delete c[b],n=!0,e.push(b)):l[b]<d&&(d=l[b]));Infinity!=d&&(G=setTimeout(x,Math.min(d-a,2147483647)));n&&(w(),v(),s(e,"deleted"))}}function E(){var a;if(c.__jstorage_meta.PubSub){var b,l=A,k=[];for(a=c.__jstorage_meta.PubSub.length-1;0<=a;a--)b=c.__jstorage_meta.PubSub[a],b[0]>A&&(l=b[0],k.unshift(b));for(a=k.length-1;0<=a;a--){b=k[a][1];var d=k[a][2];if(t[b])for(var n=0,e=t[b].length;n<e;n++)try{t[b][n](b,p.parse(p.stringify(d)))}catch(g){}}A=l}}var y=window.jQuery||window.$||(window.$={}),p={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(a){return String(a).evalJSON()}||y.parseJSON||y.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||y.toJSON};if("function"!==typeof p.parse||"function"!==typeof p.stringify)throw Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var c={__jstorage_meta:{CRC32:{}}},h={jStorage:"{}"},g=null,z=0,f=!1,m={},F=!1,r=0,t={},A=+new Date,G,B={isXML:function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1},encode:function(a){if(!this.isXML(a))return!1;try{return(new XMLSerializer).serializeToString(a)}catch(b){try{return a.xml}catch(c){}}return!1},decode:function(a){var b="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(a){var b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b};if(!b)return!1;a=b.call("DOMParser"in window&&new DOMParser||window,a,"text/xml");return this.isXML(a)?a:!1}};y.jStorage={version:"0.4.12",set:function(a,b,l){q(a);l=l||{};if("undefined"==typeof b)return this.deleteKey(a),b;if(B.isXML(b))b={_is_xml:!0,xml:B.encode(b)};else{if("function"==typeof b)return;b&&"object"==typeof b&&(b=p.parse(p.stringify(b)))}c[a]=b;for(var k=c.__jstorage_meta.CRC32,d=p.stringify(b),g=d.length,e=2538058380^g,h=0,f;4<=g;)f=d.charCodeAt(h)&255|(d.charCodeAt(++h)&255)<<8|(d.charCodeAt(++h)&255)<<16|(d.charCodeAt(++h)&255)<<24,f=1540483477*(f&65535)+((1540483477*(f>>>16)&65535)<<16),f^=f>>>24,f=1540483477*(f&65535)+((1540483477*(f>>>16)&65535)<<16),e=1540483477*(e&65535)+((1540483477*(e>>>16)&65535)<<16)^f,g-=4,++h;switch(g){case 3:e^=(d.charCodeAt(h+2)&255)<<16;case 2:e^=(d.charCodeAt(h+1)&255)<<8;case 1:e^=d.charCodeAt(h)&255,e=1540483477*(e&65535)+((1540483477*(e>>>16)&65535)<<16)}e^=e>>>13;e=1540483477*(e&65535)+((1540483477*(e>>>16)&65535)<<16);k[a]="2."+((e^e>>>15)>>>0);this.setTTL(a,l.TTL||0);s(a,"updated");return b},get:function(a,b){q(a);return a in c?c[a]&&"object"==typeof c[a]&&c[a]._is_xml?B.decode(c[a].xml):c[a]:"undefined"==typeof b?null:b},deleteKey:function(a){q(a);return a in c?(delete c[a],"object"==typeof c.__jstorage_meta.TTL&&a in c.__jstorage_meta.TTL&&delete c.__jstorage_meta.TTL[a],delete c.__jstorage_meta.CRC32[a],w(),v(),s(a,"deleted"),!0):!1},setTTL:function(a,b){var l=+new Date;q(a);b=Number(b)||0;return a in c?(c.__jstorage_meta.TTL||(c.__jstorage_meta.TTL={}),0<b?c.__jstorage_meta.TTL[a]=l+b:delete c.__jstorage_meta.TTL[a],w(),x(),v(),!0):!1},getTTL:function(a){var b=+new Date;q(a);return a in c&&c.__jstorage_meta.TTL&&c.__jstorage_meta.TTL[a]?(a=c.__jstorage_meta.TTL[a]-b)||0:0},flush:function(){c={__jstorage_meta:{CRC32:{}}};w();v();s(null,"flushed");return!0},storageObj:function(){function a(){}a.prototype=c;return new a},index:function(){var a=[],b;for(b in c)c.hasOwnProperty(b)&&"__jstorage_meta"!=b&&a.push(b);return a},storageSize:function(){return z},currentBackend:function(){return f},storageAvailable:function(){return!!f},listenKeyChange:function(a,b){q(a);m[a]||(m[a]=[]);m[a].push(b)},stopListening:function(a,b){q(a);if(m[a])if(b)for(var c=m[a].length-1;0<=c;c--)m[a][c]==b&&m[a].splice(c,1);else delete m[a]},subscribe:function(a,b){a=(a||"").toString();if(!a)throw new TypeError("Channel not defined");t[a]||(t[a]=[]);t[a].push(b)},publish:function(a,b){a=(a||"").toString();if(!a)throw new TypeError("Channel not defined");c.__jstorage_meta||(c.__jstorage_meta={});c.__jstorage_meta.PubSub||(c.__jstorage_meta.PubSub=[]);c.__jstorage_meta.PubSub.unshift([+new Date,a,b]);w();v()},reInit:function(){C()},noConflict:function(a){delete window.$.jStorage;a&&(window.jStorage=this);return this}};(function(){var a=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),a=!0,window.localStorage.removeItem("_tmptest")}catch(b){}if(a)try{window.localStorage&&(h=window.localStorage,f="localStorage",r=h.jStorage_update)}catch(c){}else if("globalStorage"in window)try{window.globalStorage&&(h="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],f="globalStorage",r=h.jStorage_update)}catch(k){}else if(g=document.createElement("link"),g.addBehavior){g.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(g);try{g.load("jStorage")}catch(d){g.setAttribute("jStorage","{}"),g.save("jStorage"),g.load("jStorage")}a="{}";try{a=g.getAttribute("jStorage")}catch(m){}try{r=g.getAttribute("jStorage_update")}catch(e){}h.jStorage=a;f="userDataBehavior"}else{g=null;return}D();x();"localStorage"==f||"globalStorage"==f?"addEventListener"in window?window.addEventListener("storage",u,!1):document.attachEvent("onstorage",u):"userDataBehavior"==f&&setInterval(u,1e3);E();"addEventListener"in window&&window.addEventListener("pageshow",function(a){a.persisted&&u()},!1)})()})();!function(){var __modules__={};function require(id){var mod=__modules__[id];var exports="exports";if(typeof mod==="object"){return mod}if(!mod[exports]){mod[exports]={};mod[exports]=mod.call(mod[exports],require,mod[exports],mod)||mod[exports]}return mod[exports]}function define(path,fn){__modules__[path]=fn}define("jquery",function(){return jQuery});define("popup",function(require){var $=require("jquery");var _count=0;var _isIE6=!("minWidth"in $("html")[0].style);var _isFixed=!_isIE6;function Popup(){this.destroyed=false;this.__popup=$("<div />").css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(this.innerHTML).appendTo("body");this.__backdrop=this.__mask=$("<div />").css({opacity:.7,background:"#000"});this.node=this.__popup[0];this.backdrop=this.__backdrop[0];_count++}$.extend(Popup.prototype,{node:null,backdrop:null,fixed:false,destroyed:true,open:false,returnValue:"",autofocus:true,align:"bottom left",innerHTML:"",className:"ui-popup",show:function(anchor){if(this.destroyed){return this}var that=this;var popup=this.__popup;var backdrop=this.__backdrop;this.__activeElement=this.__getActive();this.open=true;this.follow=anchor||this.follow;if(!this.__ready){popup.addClass(this.className).attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute");if(!_isIE6){$(window).on("resize",$.proxy(this.reset,this))}if(this.modal){var backdropCss={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:this.zIndex||Popup.zIndex};popup.addClass(this.className+"-modal");if(!_isFixed){$.extend(backdropCss,{position:"absolute",width:$(window).width()+"px",height:$(document).height()+"px"})}backdrop.css(backdropCss).attr({tabindex:"0"}).on("focus",$.proxy(this.focus,this));this.__mask=backdrop.clone(true).attr("style","").insertAfter(popup);backdrop.addClass(this.className+"-backdrop").insertBefore(popup);this.__ready=true}if(!popup.html()){popup.html(this.innerHTML)}}popup.addClass(this.className+"-show").show();backdrop.show();this.reset().focus();this.__dispatchEvent("show");return this},showModal:function(){this.modal=true;return this.show.apply(this,arguments)},close:function(result){if(!this.destroyed&&this.open){if(result!==undefined){this.returnValue=result}this.__popup.hide().removeClass(this.className+"-show");this.__backdrop.hide();this.open=false;this.blur();this.__dispatchEvent("close")}return this},remove:function(){if(this.destroyed){return this}this.__dispatchEvent("beforeremove");if(Popup.current===this){Popup.current=null}this.__popup.remove();this.__backdrop.remove();this.__mask.remove();if(!_isIE6){$(window).off("resize",this.reset)}this.__dispatchEvent("remove");for(var i in this){delete this[i]}return this},reset:function(){var elem=this.follow;if(elem){this.__follow(elem)}else{this.__center()}this.__dispatchEvent("reset");return this},focus:function(){var node=this.node;var popup=this.__popup;var current=Popup.current;var index=this.zIndex=Popup.zIndex++;if(current&&current!==this){current.blur(false)}if(!$.contains(node,this.__getActive())){var autofocus=popup.find("[autofocus]")[0];if(!this._autofocus&&autofocus){this._autofocus=true}else{autofocus=node}this.__focus(autofocus)}popup.css("zIndex",index);Popup.current=this;popup.addClass(this.className+"-focus");this.__dispatchEvent("focus");return this},blur:function(){var activeElement=this.__activeElement;var isBlur=arguments[0];if(isBlur!==false){this.__focus(activeElement)}this._autofocus=false;this.__popup.removeClass(this.className+"-focus");this.__dispatchEvent("blur");return this},addEventListener:function(type,callback){this.__getEventListener(type).push(callback);return this},removeEventListener:function(type,callback){var listeners=this.__getEventListener(type);for(var i=0;i<listeners.length;i++){if(callback===listeners[i]){listeners.splice(i--,1)}}return this},__getEventListener:function(type){var listener=this.__listener;if(!listener){listener=this.__listener={}}if(!listener[type]){listener[type]=[]}return listener[type]},__dispatchEvent:function(type){var listeners=this.__getEventListener(type);if(this["on"+type]){this["on"+type]()}for(var i=0;i<listeners.length;i++){listeners[i].call(this)}},__focus:function(elem){try{if(this.autofocus&&!/^iframe$/i.test(elem.nodeName)){elem.focus()}}catch(e){}},__getActive:function(){try{var activeElement=document.activeElement;var contentDocument=activeElement.contentDocument;var elem=contentDocument&&contentDocument.activeElement||activeElement;return elem}catch(e){}},__center:function(){var popup=this.__popup;var $window=$(window);var $document=$(document);var fixed=this.fixed;var dl=fixed?0:$document.scrollLeft();var dt=fixed?0:$document.scrollTop();var ww=$window.width();var wh=$window.height();var ow=popup.width();var oh=popup.height();var left=(ww-ow)/2+dl;var top=(wh-oh)*382/1e3+dt;var style=popup[0].style;style.left=Math.max(parseInt(left),dl)+"px";style.top=Math.max(parseInt(top),dt)+"px"},__follow:function(anchor){var $elem=anchor.parentNode&&$(anchor);var popup=this.__popup;if(this.__followSkin){popup.removeClass(this.__followSkin)}if($elem){var o=$elem.offset();if(o.left*o.top<0){return this.__center()}}var that=this;var fixed=this.fixed;var $window=$(window);var $document=$(document);var winWidth=$window.width();var winHeight=$window.height();var docLeft=$document.scrollLeft();var docTop=$document.scrollTop();var popupWidth=popup.width();var popupHeight=popup.height();var width=$elem?$elem.outerWidth():0;var height=$elem?$elem.outerHeight():0;var offset=this.__offset(anchor);var x=offset.left;var y=offset.top;var left=fixed?x-docLeft:x;var top=fixed?y-docTop:y;var minLeft=fixed?0:docLeft;var minTop=fixed?0:docTop;var maxLeft=minLeft+winWidth-popupWidth;var maxTop=minTop+winHeight-popupHeight;var css={};var align=this.align.split(" ");var className=this.className+"-";var reverse={top:"bottom",bottom:"top",left:"right",right:"left"};var name={top:"top",bottom:"top",left:"left",right:"left"};var temp=[{top:top-popupHeight,bottom:top+height,left:left-popupWidth,right:left+width},{top:top,bottom:top-popupHeight+height,left:left,right:left-popupWidth+width}];var center={left:left+width/2-popupWidth/2,top:top+height/2-popupHeight/2};var range={left:[minLeft,maxLeft],top:[minTop,maxTop]};$.each(align,function(i,val){if(temp[i][val]>range[name[val]][1]){val=align[i]=reverse[val]}if(temp[i][val]<range[name[val]][0]){align[i]=reverse[val]}});if(!align[1]){name[align[1]]=name[align[0]]==="left"?"top":"left";temp[1][align[1]]=center[name[align[1]]]}className+=align.join("-")+" "+this.className+"-follow";that.__followSkin=className;if($elem){popup.addClass(className)}css[name[align[0]]]=parseInt(temp[0][align[0]]);css[name[align[1]]]=parseInt(temp[1][align[1]]);popup.css(css)},__offset:function(anchor){var isNode=anchor.parentNode;var offset=isNode?$(anchor).offset():{left:anchor.pageX,top:anchor.pageY};anchor=isNode?anchor:anchor.target;var ownerDocument=anchor.ownerDocument;var defaultView=ownerDocument.defaultView||ownerDocument.parentWindow;if(defaultView==window){return offset}var frameElement=defaultView.frameElement;var $ownerDocument=$(ownerDocument);var docLeft=$ownerDocument.scrollLeft();var docTop=$ownerDocument.scrollTop();var frameOffset=$(frameElement).offset();var frameLeft=frameOffset.left;var frameTop=frameOffset.top;return{left:offset.left+frameLeft-docLeft,top:offset.top+frameTop-docTop}}});Popup.zIndex=1024;Popup.current=null;return Popup});define("dialog-config",{backdropBackground:"#000",backdropOpacity:.7,content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,cancel:null,okValue:"ok",cancelValue:"cancel",cancelDisplay:true,width:"",height:"",padding:"",skin:"",quickClose:false,cssUri:"../css/ui-dialog.css",innerHTML:'<div i="dialog" class="ui-dialog">'+'<div class="ui-dialog-arrow-a"></div>'+'<div class="ui-dialog-arrow-b"></div>'+'<table class="ui-dialog-grid">'+"<tr>"+'<td i="header" class="ui-dialog-header">'+'<button i="close" class="ui-dialog-close">&#215;</button>'+'<div i="title" class="ui-dialog-title"></div>'+"</td>"+"</tr>"+"<tr>"+'<td i="body" class="ui-dialog-body">'+'<div i="content" class="ui-dialog-content"></div>'+"</td>"+"</tr>"+"<tr>"+'<td i="footer" class="ui-dialog-footer">'+'<div i="statusbar" class="ui-dialog-statusbar"></div>'+'<div i="button" class="ui-dialog-button"></div>'+"</td>"+"</tr>"+"</table>"+"</div>"});define("dialog",function(require){var $=require("jquery");var Popup=require("popup");var defaults=require("dialog-config");var css=defaults.cssUri;if(css){var fn=require[require.toUrl?"toUrl":"resolve"];if(fn){css=fn(css);css='<link rel="stylesheet" href="'+css+'" />';if($("base")[0]){$("base").before(css)}else{$("head").append(css)}}}var _count=0;var _expando=new Date-0;var _isIE6=!("minWidth"in $("html")[0].style);var _isMobile="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent);var _isFixed=!_isIE6&&!_isMobile;var artDialog=function(options,ok,cancel){var originalOptions=options=options||{};if(typeof options==="string"||options.nodeType===1){options={content:options,fixed:!_isMobile}}options=$.extend(true,{},artDialog.defaults,options);options.original=originalOptions;var id=options.id=options.id||_expando+_count;var api=artDialog.get(id);if(api){return api.focus()}if(!_isFixed){options.fixed=false}if(options.quickClose){options.modal=true;options.backdropOpacity=0}if(!$.isArray(options.button)){options.button=[]}if(cancel!==undefined){options.cancel=cancel}if(options.cancel){options.button.push({id:"cancel",value:options.cancelValue,callback:options.cancel,display:options.cancelDisplay})}if(ok!==undefined){options.ok=ok}if(options.ok){options.button.push({id:"ok",value:options.okValue,callback:options.ok,autofocus:true})}return artDialog.list[id]=new artDialog.create(options)};var popup=function(){};popup.prototype=Popup.prototype;var prototype=artDialog.prototype=new popup;artDialog.create=function(options){var that=this;$.extend(this,new Popup);var originalOptions=options.original;var $popup=$(this.node).html(options.innerHTML);var $backdrop=$(this.backdrop);this.options=options;this._popup=$popup;$.each(options,function(name,value){if(typeof that[name]==="function"){that[name](value)}else{that[name]=value}});if(options.zIndex){Popup.zIndex=options.zIndex}$popup.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")});this._$("close").css("display",this.cancel===false?"none":"").attr("title",this.cancelValue).on("click",function(event){that._trigger("cancel");event.preventDefault()});this._$("dialog").addClass(this.skin);this._$("body").css("padding",this.padding);if(options.quickClose){$backdrop.on("onmousedown"in document?"mousedown":"click",function(){that._trigger("cancel");return false})}this.addEventListener("show",function(){$backdrop.css({opacity:0,background:options.backdropBackground}).animate({opacity:options.backdropOpacity},150)});this._esc=function(event){var target=event.target;var nodeName=target.nodeName;var rinput=/^input|textarea$/i;var isTop=Popup.current===that;var keyCode=event.keyCode;if(!isTop||rinput.test(nodeName)&&target.type!=="button"){return}if(keyCode===27){that._trigger("cancel")}};$(document).on("keydown",this._esc);this.addEventListener("remove",function(){$(document).off("keydown",this._esc);delete artDialog.list[this.id]});_count++;artDialog.oncreate(this);return this};artDialog.create.prototype=prototype;$.extend(prototype,{content:function(html){var $content=this._$("content");if(typeof html==="object"){html=$(html);$content.empty("").append(html.show());this.addEventListener("beforeremove",function(){$("body").append(html.hide())})}else{$content.html(html)}return this.reset()},title:function(text){this._$("title").text(text);this._$("header")[text?"show":"hide"]();return this},width:function(value){this._$("content").css("width",value);return this.reset()},height:function(value){this._$("content").css("height",value);return this.reset()},button:function(args){args=args||[];var that=this;var html="";var number=0;this.callbacks={};if(typeof args==="string"){html=args;number++}else{$.each(args,function(i,val){var id=val.id=val.id||val.value;var style="";that.callbacks[id]=val.callback;if(val.display===false){style=' style="display:none"'}else{number++}html+="<button"+' type="button"'+' i-id="'+id+'"'+style+(val.disabled?" disabled":"")+(val.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+val.value+"</button>";that._$("button").on("click","[i-id="+id+"]",function(event){var $this=$(this);if(!$this.attr("disabled")){that._trigger(id)}event.preventDefault()})})}this._$("button").html(html);this._$("footer")[number?"show":"hide"]();return this},statusbar:function(html){this._$("statusbar").html(html)[html?"show":"hide"]();return this},_$:function(i){return this._popup.find("[i="+i+"]")},_trigger:function(id){var fn=this.callbacks[id];return typeof fn!=="function"||fn.call(this)!==false?this.close().remove():this}});artDialog.oncreate=$.noop;artDialog.getCurrent=function(){return Popup.current};artDialog.get=function(id){return id===undefined?artDialog.list:artDialog.list[id]};artDialog.list={};artDialog.defaults=defaults;return artDialog});window.dialog=require("dialog")}();