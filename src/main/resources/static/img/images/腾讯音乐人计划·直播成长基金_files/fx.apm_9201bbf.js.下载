"use strict";!function(){var a={frontStatSwitch:0,isInited:!1,appid:1010,isCollectLine:!1,collectQueue:[],platData:{isClanRoom:!1,platform:"web",pageChannel:1,page:2,fanxid:0,userid:0},statReportObj:{20001:[]},totalReportObj:{},statReportType:{DOM_LOAD_TIME:1001,FIRST_SCREEN_TIME:1002,BLANK_SCREEN_TIME:1003,LIVE_PLAYER_LOAD_TIME:1004,SOCKET_SWF_LOAD_TIME:1006,JS_ERROR_DATA:1010,SOCKET_SWF_OVER_TEN:1011,LIVE_PLAYER_OVER_TEN:1012,VIEW_LIST_ERROR:1016,LIVE_VIDEO_LOAD_TIME:1022,VIDEO_LOAD_TIME:1023,CAN_CHAT_TIME:1035,CHAT_FAIL_RATE:1036},init:function(a,c,h){this.isInited||(a=a||{},this.statReportObj=c||this.statReportObj,this.totalReportObj=h||this.totalReportObj,this.isInited=!0,this.platData.fanxid=a.fanxid||0,this.platData.userid=a.userid||0,this.appid=a.appid||"1010",this.frontStatSwitch=a.frontStatSwitch||0,1==this.frontStatSwitch?this._loadCollectJS(this._collectReadyCallback):h&&this._loadCollectJS(this._sendTotalReportObj))},_loadCollectJS:function(a){this.loadingJs=!0;var c=document.createElement("script"),h=this;c.src="http://js.webcollect.kugou.com/v2/web/collect.js?appid="+this.appid+"&_t="+(new Date).getTime()+"&_r="+Math.random(),c.ready=function(a){c.onload=c.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||c.loaded||(a&&a.call(h),c.loaded=!0)}},"function"==typeof a&&c.ready(a),document.body.appendChild(c)},_collectReadyCallback:function(){var a=this,c=setTimeout(function(){a._startReport(c)},3e3);this.sendTotalReportObj(this.totalReportObj)},_startReport:function(a){clearTimeout(a),a=null,this.sendTotalReportObj(this.statReportObj);var c=this;a=setTimeout(function(){c._startReport.call(c,a)},3e4)},_dataFormat:function(a){var c=a;return void 0==a.fanxid&&(c.fanxid=this.platData.fanxid),void 0==a.userid&&(c.userid=this.platData.userid),c},newLogCount:function(a,c,h,_){var R={type:c.$requestMethod?c.$requestMethod:"get"};for(var O in c)c.hasOwnProperty(O)&&0==O.indexOf("$")&&delete c[O];if(this.isCollectLine)return this.collectQueue.push({business:a,datas:c,callback:h,option_server:_,options:R}),void this.sendQueueList();if("function"==typeof window.newLogCount)try{window.newLogCount(a,c,h,_,R)}catch(b){console.log(b)}},isSendQueue:!1,sendQueueList:function(){if(0!=this.collectQueue.length&&!this.isSendQueue){this.isSendQueue=!0;var a=this.collectQueue[0];"function"==typeof window.newLogCount?window.newLogCount.call(this,a.business,a.datas,this.sendQueueCallback,a.option_server,a.options):this.isSendQueue=!1}},sendQueueCallback:function(){var a=Fx.apm;a.isSendQueue=!1;var c=a.collectQueue.shift();c.callback&&c.callback.call(a),a.sendQueueList()},addStatReportObj:function(a,c){var h=this.statReportObj[a];void 0==h&&(h=[]),c instanceof Array?h=h.concat(c):h.push(c),this.statReportObj[a]=h},loadingJs:!1,totalStatReport:function(a,c){var h=this.totalReportObj[a];if(h=h||[],c instanceof Array?h=h.concat(c):h.push(c),this.totalReportObj[a]=h,"function"==typeof window.newLogCount)this._sendTotalReportObj.call(this);else{if(this.loadingJs)return;this._loadCollectJS(this._sendTotalReportObj)}},_sendTotalReportObj:function(){this.sendTotalReportObj(this.totalReportObj)},sendTotalReportObj:function(a){var c=null;for(var h in a)if(a.hasOwnProperty(h))for(;c=a[h].shift();)c&&(12==h?this.newLogCount(12,this._dataFormat(c),"",1):(this.newLogCount(h,c),20001==h&&this.newLogCount(12,this._dataFormat(c),"",1)))}};"function"==typeof define&&define("static/node_modules/fx.apm/src/fx.apm",[],function(require,exports,module){module.exports=a}),window.Fx=window.Fx||{},window.Fx.apm=a}();