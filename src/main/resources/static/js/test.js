function playStart(hash){}function playOver(hash){if($(".jspPane p")){play.globalParam.ind=-2,$(".jspPane p").removeClass("playOver");var _wordArrObj=$(".jspPane"),str=_wordArrObj.css("top");Number(str.replace("px",""));_wordArrObj.animate({top:"0px"})}}function playOpen(){try{var _s,_t,_sum,word=play.globalParam.word,_wordArr=word.match(/\[(.*)\]/g);play.globalParam.wordArr=[],play.globalParam.wordArrLen=_wordArr?_wordArr.length:0;for(var i=0;i<play.globalParam.wordArrLen;i++)_s=_wordArr[i],_t=_s.substr(1,2),_sum=60*Math.floor(_t)*1e3,_t=_s.substr(4,2),_sum+=1e3*Math.floor(_t),_t=_s.substr(7,2),_sum+=10*Math.floor(_t),play.globalParam.wordArr.push(_sum);_wordArr=null,play.globalParam.wordArrHTML=$(".jspPane p")}catch(ex){}}function JSPositioningPlay(pro,msec){play.globalParam.isPlayDrop||(play.setProgress(Number(pro)),play.setPlayDuration(Math.floor(msec)),play.lyricsPlay(Math.floor(msec)))}!function(){window.console||(window.console={});for(var console=window.console,funcs=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],i=0,l=funcs.length;i<l;i++){var func=funcs[i];console[func]||(console[func]=function(){})}console.memory||(console.memory={})}();var utility={QueryString:function(){if(arg1=arguments[0],arg2=arguments[1],arguments.length>1&&""!=arg1&&""!=arg2&&void 0!=arg1&&void 0!=arg2){var b=arguments[0].match(new RegExp("(^|&)"+arg2+"=([^&]*)(&|$)","i"));return null!=b?b[2]:""}if(""!=arg1&&void 0!=arg1){var b=location.hash.match(new RegExp("[#&]"+arg1+"=([^&]*)(&?)","i"));return b?b[1]:b}},insertArrayAt:function(array,index,arrayToInsert){return Array.prototype.splice.apply(array,[index,0].concat(arrayToInsert)),array},htmlEncode2:function(str){var s="";return str&&0==str.length||void 0===str?s:(s=str.replace(/\</g,"&lt;"),s=s.replace(/\>/g,"&gt;"),s=s.replace(/ /g,"&nbsp;"),s=s.replace(/\"/g,"&quot;"))},playEncode:function(str){var s="";return str&&0==str.length||void 0===str?s:(s=str.replace(/\</g,"&lt;"),s=s.replace(/\>/g,"&gt;"),s=s.replace(/ /g,"&nbsp;"))},SIPHtmlDecode:function(str){var s="";return 0==str.length||void 0===str?s:(s=str.replace(/&lt;/g,"<"),s=s.replace(/&#60;/g,"<"),s=s.replace(/&gt;/g,">"),s=s.replace(/&#62;/g,">"))},getMS:function(msec){var sec=msec/1e3,t=sec,m=Math.floor(t/60),s=Math.floor(t%60),ms="";return ms+=m>=10?m:"0"+m,ms+=":",ms+=s>=10?s:"0"+s},isIE:function(ver){var b=document.createElement("b");return b.innerHTML="\x3c!--[if IE "+ver+"]><i></i><![endif]--\x3e",1===b.getElementsByTagName("i").length},detectOS:function(){var isWin=(navigator.userAgent,"Win32"==navigator.platform||"Windows"==navigator.platform||"Win64"==navigator.platform),isMac="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;return isMac?"Mac":"X11"!=navigator.platform||isWin||isMac?String(navigator.platform).indexOf("Linux")>-1?"Linux":isWin?"Windows":"other":"Unix"},getBrowser:function(){var s,Sys={},ua=navigator.userAgent.toLowerCase();return(s=ua.match(/rv:([\d.]+)\) like gecko/))?Sys={v:s[1],type:"ie"}:(s=ua.match(/msie ([\d.]+)/))?Sys={v:s[1],type:"ie"}:(s=ua.match(/firefox\/([\d.]+)/))?Sys={v:s[1],type:"firefox"}:(s=ua.match(/chrome\/([\d.]+)/))?Sys={v:s[1],type:"chrome"}:(s=ua.match(/opera.([\d.]+)/))?Sys={v:s[1],type:"opera"}:(s=ua.match(/version\/([\d.]+).*safari/))&&(Sys={v:s[1],type:"safari"}),Sys},read:function(name,key){var cookieValue="",search=name+"=";document.cookie.split("").length>0&&(offset=document.cookie.indexOf(search),-1!=offset&&(offset+=search.length,end=document.cookie.indexOf(";",offset),-1==end&&(end=document.cookie.split("").length),cookieValue=document.cookie.substring(offset,end)));for(var a=cookieValue.split("&"),o={},haveVal=!1,i=0,l=a.length;i<l;i++){var k=a[i].split("=");""!=k[0]&&(o[k[0]]=k[1],haveVal=!0)}return!!haveVal&&o},formatDateTime:function(date){var y=date.getFullYear(),m=date.getMonth()+1;m=m<10?"0"+m:m;var d=date.getDate();d=d<10?"0"+d:d;var h=date.getHours(),minute=date.getMinutes();return minute=minute<10?"0"+minute:minute,y+"-"+m+"-"+d+" "+h+":"+minute}};String.prototype.trim=function(){return this.replace(/^\s*|\s*$/g,"")};var common_header={init:function(){var _this=this;_this.herderUI(),_this.navUI(),_this.inputUI()},islogined:function(){var loginInfo=utility.read("KuGoo");return""!=loginInfo&&"undefined"!=loginInfo.toString()&&!1!==loginInfo},herderUI:function(){var _this=this,login_in=document.getElementById("login_in"),login_btn=document.getElementById("login_btn"),login_out=document.getElementById("login_out"),user_menu=document.getElementById("user_menu"),menuT=null;if(_this.islogined()){var kugouC=utility.read("KuGoo"),user_name=kugouC.NickName.replace(/%/g,"\\"),user=eval("'"+user_name+"'"),uer_img=kugouC.Pic;$("#login_in").hide(),$(login_out).show(),$(login_out).find(".user_img").attr("src",replaceHttpsImg(uer_img)),$(login_out).find(".user_name").html(user)}else $("#login_btn").on("click",function(e){$.ajax({url:"https://staticssl.kugou.com/common/js/min/popuplogin-min.js?"+Math.round((new Date).getTime()/1e3),dataType:"script",success:function(){UsLogin()}})});login_out.onmouseover=function(){user_menu.style.cssText="display:block;"},login_out.onmouseleave=function(){menuT=setTimeout(function(){user_menu.style.display="none"},300)},login_out.onclick=function(){window.open("http://www.kugou.com/newuc/user/uc/")},user_menu.onmouseover=function(){clearTimeout(menuT),user_menu.style.cssText="display:block;"},user_menu.onmouseleave=function(){user_menu.style.cssText="display:none"}},navUI:function(){var t=null,More=document.getElementById("more"),showMore=document.getElementById("showMore"),subUl=document.getElementById("secondMenu");showMore.onclick=function(){return!1},More.onmouseover=function(){this.setAttribute("class","more hover"),showMore.setAttribute("class","icon icon-nav6"),subUl.style.cssText="display:block;"},More.onmouseleave=function(){this.setAttribute("class","more"),showMore.setAttribute("class","icon icon-nav6"),t=setTimeout(function(){subUl.style.display="none"},300)},subUl.onmouseover=function(){clearTimeout(t),More.setAttribute("class","more hover"),showMore.setAttribute("class","icon icon-nav6"),subUl.style.cssText="display:block;"},subUl.onmouseleave=function(){More.setAttribute("class","more"),showMore.setAttribute("class","icon icon-nav6"),subUl.style.cssText="display:none"}},delHtmlTag:function(str){return str.replace(/<[^>]+>/g,"")},inputUI:function(){var _this=this,$searh_btn=$(".searh_btn"),$top_history=$(".top_search_histroy"),$top_search_recommend=$(".top_search_recommend"),$top_searchInput=$(".top_search .search_input input"),topTime=null,downFlag=1,upFlag=2,defaultFlag=!1;$top_history.on("click",".clear_histroy",function(){localStorage.s_keyword="",$top_history.find(".history_song_list").empty(),$top_history.removeClass("show").addClass("hide")}),_this.nofouce(function(data){defaultFlag=!0,$.isEmptyObject(data)||void 0===data||""==data||0==data.length||"undefined"==data[0]||"undefined"==data[0].keyword||(_this.hasPlaceholder()?$top_searchInput.attr("placeholder",data[0].keyword):$top_searchInput.val(data[0].keyword))}),$searh_btn.on("click",function(){var type=$top_searchInput.attr("data")||"song",keyword=_this.delHtmlTag($top_searchInput.val()).replace(/(^\s+)|(\s+$)/g,"");""==keyword&&(keyword=$top_searchInput.attr("placeholder")||""),window.open("http://www.kugou.com/yy/html/search.html#searchType="+type+"&searchKeyWord="+keyword)}),$top_searchInput.on("keydown",function(e){var keyword=_this.delHtmlTag($top_searchInput.val()),histroydd=$(".top_search_histroy dd"),songdd=$(".top_search_recommend dl.recommend_song_list dd"),mvdd=$(".top_search_recommend dl.recommend_mv_list dd"),histroyIndex=$(".top_search_histroy dd.hover").index(),songIndex=$(".top_search_recommend .recommend_song_list dd.hover").index(),MvIndex=$(".top_search_recommend .recommend_mv_list dd.hover").index();if(13===e.keyCode){var type=$top_searchInput.attr("data"),keyword=_this.delHtmlTag($top_searchInput.val()).replace(/(^\s+)|(\s+$)/g,"");window.open("http://www.kugou.com/yy/html/search.html#searchType="+type+"&searchKeyWord="+encodeURIComponent(keyword))}else 38==e.keyCode?(upFlag=-1!=songIndex?1:2,$top_history.hasClass("show")?histroyIndex+1==0?histroydd.eq(histroydd.length-1).addClass("hover").siblings("dd").removeClass("hover"):histroydd.eq(histroyIndex-1).addClass("hover").siblings("dd").removeClass("hover"):$top_search_recommend.hasClass("show")&&(0==mvdd.length&&0!=songdd.length&&(upFlag=1,songIndex+1==0?(upFlag=1,songdd.removeClass("hover"),songdd.eq(songdd.length-1).addClass("hover")):(upFlag=1,songdd.removeClass("hover"),songdd.eq(songIndex-1).addClass("hover"))),0==songdd.length&&0!=mvdd.length&&(upFlag=2,MvIndex+1==0?(songdd.removeClass("hover"),mvdd.eq(mvdd.length-1).addClass("hover")):(mvdd.removeClass("hover"),mvdd.eq(MvIndex-1).addClass("hover"))),0!=songdd.length&&0!=mvdd.length&&(1==upFlag?0==songIndex?(upFlag=2,songdd.removeClass("hover"),mvdd.eq(mvdd.length-1).addClass("hover")):(songdd.removeClass("hover"),songdd.eq(songIndex-1).addClass("hover")):MvIndex+1==0?(songdd.removeClass("hover"),mvdd.eq(mvdd.length-1).addClass("hover")):0==MvIndex?(upFlag=1,mvdd.removeClass("hover"),songdd.eq(songdd.length-1).addClass("hover")):(mvdd.removeClass("hover"),mvdd.eq(MvIndex-1).addClass("hover")))),$top_history.hasClass("show")?$top_searchInput.val($(".search_histroy dd.hover").attr("title")):$top_search_recommend.hasClass("show")&&(1==upFlag?$top_searchInput.val($(".top_search_recommend .recommend_song_list dd.hover").attr("title")).attr("data","song"):$top_searchInput.val($(".top_search_recommend .recommend_mv_list dd.hover").attr("title")).attr("data","mv"))):40==e.keyCode&&($top_history.hasClass("show")?histroyIndex+1==histroydd.length?histroydd.eq(0).addClass("hover").siblings("dd").removeClass("hover"):histroydd.eq(histroyIndex+1).addClass("hover").siblings("dd").removeClass("hover"):$top_search_recommend.hasClass("show")&&(0==mvdd.length&&0!=songdd.length&&(downFlag=1,songIndex+1==songdd.length?(songdd.removeClass("hover"),songdd.eq(0).addClass("hover")):(songdd.removeClass("hover"),songdd.eq(songIndex+1).addClass("hover"))),0==songdd.length&&0!=mvdd.length&&(downFlag=2,MvIndex+1==songdd.length?(mvdd.removeClass("hover"),mvdd.eq(0).addClass("hover")):(mvdd.removeClass("hover"),mvdd.eq(MvIndex+1).addClass("hover"))),0!=songdd.length&&0!=mvdd.length&&(1==downFlag?songIndex+1==0?(mvdd.removeClass("hover"),songdd.eq(0).addClass("hover")):songIndex+1==songdd.length?(downFlag=2,songdd.removeClass("hover"),mvdd.eq(0).addClass("hover")):(songdd.removeClass("hover"),songdd.eq(songIndex+1).addClass("hover")):MvIndex+1==mvdd.length?(downFlag=1,mvdd.removeClass("hover"),songdd.eq(0).addClass("hover")):(mvdd.removeClass("hover"),mvdd.eq(MvIndex+1).addClass("hover")))),$top_history.hasClass("show")?$top_searchInput.val($(".search_histroy dd.hover").attr("title")):$top_search_recommend.hasClass("show")&&(1==downFlag?$top_searchInput.val($(".top_search_recommend .recommend_song_list dd.hover").attr("title")).attr("data","song"):$top_searchInput.val($(".top_search_recommend .recommend_mv_list dd.hover").attr("title")).attr("data","mv")))}).on("click",function(){defaultFlag=!1,_this.displayTip()}).on("textchange",function(){defaultFlag||_this.displayTip()}).on("blur",function(){topTime=setTimeout(function(){$top_history.hasClass("noData")||$top_history.fadeOut(100).addClass("hide").removeClass("show"),$top_search_recommend.fadeOut(100).addClass("hide").removeClass("show")},400)}),$top_history.mouseover(function(){clearTimeout(topTime),$top_history.removeClass("hide").addClass("show")}),$top_history.on("mousedown","dd",function(){var keyword=$(this).text();return $top_searchInput.val(keyword),window.open("http://www.kugou.com/yy/html/search.html#searchType=song&searchKeyWord="+encodeURIComponent(keyword)),$top_history.removeClass("show").addClass("hide"),!1}),$top_search_recommend.mouseover(function(){clearTimeout(topTime),$top_history.removeClass("hide").addClass("show")}),$top_search_recommend.on("mousedown","dd",function(){var keyword=$(this).text();return $top_searchInput.val(keyword),_this.keywordStorge(keyword),window.open("http://www.kugou.com/yy/html/search.html#searchType="+$(this).attr("data-type")+"&searchKeyWord="+encodeURIComponent(keyword)),$top_search_recommend.removeClass("show").addClass("hide"),!1})},nofouce:function(callback){$.ajax({type:"GET",url:"https://searchrecommend.kugou.com/v1/word_nofocus?platform=pc",dataType:"jsonp",success:function(res){callback(1==res.status?res.data:"")},error:function(res){callback("")}})},displayTip:function(){var _this=this,$top_history=$(".top_search_histroy"),$top_search_recommend=$(".top_search_recommend"),$top_searchInput=$(".top_search .search_input input"),wordRecommendTime=null;""!=_this.delHtmlTag($top_searchInput.val())?($top_history.fadeOut(100).addClass("hide").removeClass("show"),clearTimeout(wordRecommendTime),wordRecommendTime=setTimeout(function(){_this.wordRecommend({keyword:_this.delHtmlTag($top_searchInput.val()),callback:function(str){""!=str&&$top_search_recommend.html(str).fadeIn(100).addClass("show").removeClass("hide")}})},10)):($top_search_recommend.fadeOut(100).addClass("hide").removeClass("show"),_this.historyHtml(function(str){""!=str?$top_history.html(str).fadeIn(100).addClass("show").removeClass("hide"):$top_history.addClass("noData")}))},wordRecommend:function(options){var defaults={keyword:"",MusicTipCount:5,MVTipCount:2,albumcount:2},_this=this,op=$.extend(defaults,options);$.ajax({type:"GET",url:"https://searchtip.kugou.com/getSearchTip?MusicTipCount=5&MVTipCount=2&albumcount=2&keyword="+encodeURIComponent(op.keyword),crossDomain:!0,dataType:"jsonp",success:function(res){if(1==res.status){if(res.data){var recommendhtml=_this.RecommendHtml(res.data,op.keyword);options.callback(recommendhtml)}}else options.callback("")},error:function(res){options.callback("")}})},RecommendHtml:function(wordData,keyword){try{var recommendSongstr="<dl class='recommend_song_list recommend_list'>",recommendMvstr="<h4><span class='icon_arrow'></span>MV</h2><dl class='recommend_mv_list recommend_list'>",songData=null,mvData=null;if(wordData[0]&&(songData=wordData[0].RecordDatas),wordData[1]&&(mvData=wordData[1].RecordDatas),0==songData.length)recommendSongstr="";else{for(var i=0,Songlen=songData.length;i<Songlen;i++){var matchText="/"+keyword+"/",textem=songData[i].HintInfo.replace(eval(matchText),"<em>"+keyword+"</em>");recommendSongstr+="<dd data-type='song' title='"+songData[i].HintInfo+"'>"+textem+"</dd>"}recommendSongstr+="</dl>"}if(0==mvData.length)return recommendSongstr;for(var j=0,Mvlen=mvData.length;j<Mvlen;j++){var matchText="/"+keyword+"/",textem=mvData[j].HintInfo.replace(eval(matchText),"<em>"+keyword+"</em>");recommendMvstr+="<dd data-type='mv' title='"+mvData[j].HintInfo+"'>"+textem+"</dd>"}return recommendMvstr+="</dl>",recommendSongstr+recommendMvstr}catch(ex){}},historyHtml:function(callback){var historyData,_this=this;if(""!=localStorage.s_keyword&&void 0!==localStorage.s_keyword&&(historyData=localStorage.s_keyword.split("|").reverse()),void 0!==historyData)if(0==historyData.length)callback("");else{for(var historyStr="<dl class='history_song_list'>",i=0,len=historyData.length;i<len;i++)historyStr+="<dd>"+_this.delHtmlTag(decodeURI(historyData[i]))+"</dd>";historyStr+="</dl><dl class='clear_histroy'><dt>清空历史记录</dt></dl>",callback(historyStr)}},hasPlaceholder:function(){return"placeholder"in document.createElement("input")},keywordStorge:function(keyword){var i,len,deleteindex,historyData=[],deleteflag=!1;for(""!=localStorage.s_keyword&&void 0!==localStorage.s_keyword&&(historyData=localStorage.s_keyword.split("|")),i=0,len=historyData.length;i<len;i++)historyData[i]=decodeURI(historyData[i]),historyData[i]==keyword&&(deleteflag=!0,deleteindex=i);deleteflag&&historyData.splice(deleteindex,1),historyData.length>=5&&(historyData=historyData.slice(historyData.length-4,historyData.length)),historyData.push(encodeURI(keyword)),localStorage.s_keyword=historyData.join("|")},unique:function(arr){for(var tmpArr=[],hash={},i=0;i<arr.length;i++)hash[arr[i]]||(hash[arr[i]]=!0,tmpArr.push(arr[i]));return tmpArr}},fanxingAdT=null,play={globalParam:{globalID:0,isAudioStop:!1,isStop:!0,isPlayDrop:!1,beginClientX:0,begingPlayHeadX:0,isVolumeDrop:!1,beginClientY:0,begingVolumeHeadY:0,myAudio:null,volumeMode:"icon icon-playbar-maxvox",volumeNum:"0.6",songDuration:0,duration:"",songName:"",songIndex:0,songW:0,doubEx:0,songNameEle1:null,songNameEle2:null,songNameEle1Left:null,songNameEle2Left:null,isFirstPlay:!0,wordArr:null,wordArrLen:0,wordArrHTML:null,ind:-2,currentPlayStatus:!1,fristFlag:!0,showPlayFlag:!1},init:function(){var _this=this,locationFrom=location.href,ua=navigator.userAgent.toLowerCase(),loadBefor=(/ipad/gi.test(ua),/android|Adr/gi.test(ua),/iphone/gi.test(ua),/fr=wrap/gi.test(locationFrom),$("#songWordContent"),""),reffer=document.referrer,kugouC=utility.read("KuGoo");$(".kuLogin"),kugouC.NickName;window.downloadUrl="http://download.kugou.com/download/kugou_pc",-1!=locationFrom.indexOf("baidu")||-1!=reffer.indexOf("baidu.com")?(loadBefor="百度",window.downloadUrl="http://xiazai.kugou.com/Corp/kugou7_3762.exe"):-1!=locationFrom.indexOf("sogou")||-1!=reffer.indexOf("sogou")?(loadBefor="搜狗",window.downloadUrl="http://xiazai.kugou.com/Corp/kugou7_3814.exe"):-1!=locationFrom.indexOf("360")||-1!=reffer.indexOf("so.com")?(loadBefor="360",window.downloadUrl="http://xiazai.kugou.com/Corp/kugou7_3500.exe"):-1!=reffer.indexOf("360.cn")?loadBefor="360导航页":-1!=reffer.indexOf("google.com")?loadBefor="谷歌":""==reffer||-1!=reffer.indexOf("kugou.com")||-1!=reffer.indexOf("download.com")?loadBefor="直接访问":""!=reffer&&(loadBefor="其他访问"),"Mac"==utility.detectOS()&&(window.downloadUrl="http://download.kugou.com/download/kugou_mac"),window.kugou_id=kugouC.KugooID;var pageLoadedData=_this.commonConfig();pageLoadedData.action="index",pageLoadedData.b="播放页访问",pageLoadedData.a=2,pageLoadedData.o=loadBefor;var Loaded=[30032,pageLoadedData];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}-1==location.href.indexOf("song-36")&&($(".mainPage").height($(window).height()),_this.resizeUI()),$(window).resize(function(){var resizeUIt=setTimeout(function(){clearTimeout(resizeUIt),_this.resizeUI()},800)});var playList=$(".songjsAction").jScrollPane({hijackInternalLinks:!0,animateScroll:!0,autoReinitialise:!0});if(_this.playListApi=playList.data("jsp"),$.jStorage.set("playFlag","true"),$.jStorage.set("newsong",null),_this.playInit(),_this.playList(),_this.playListbindUI(),_this.setActive(0),""!=location.hash)var urlHash=utility.QueryString("hash"),album_id=utility.QueryString("album_id");if(void 0!==urlHash&&""!=urlHash&&null!=urlHash)_this.getdatabyhash({Hash:urlHash,album_id:album_id,callback:function(res){if(0!=res.status&&0!=res.data.length){var songs=[],authors="",songData={};songData.Hash=res.data.hash,$(res.data.authors).each(function(i){authors+=res.data.authors[i].author_name+" "}),songData.author_name=authors,songData.audio_name=res.data.song_name,songData.timelength=res.data.timelength,songData.album_id=res.data.album_id,songs.push(songData);var resSong=JSON.stringify(songs);$.jStorage.set("newsong",resSong)}else{var title="获取数据失败";msg="获取数据失败，稍后重试",res&&0==res.status&&res.err_code&&30010==res.err_code&&(title="服务器繁忙",msg="服务器繁忙，请稍后再尝试");dialog({id:"datafail",width:300,height:100,title:title,skin:"getdatafail",content:msg}).show();_this.globalParam.length>1&&_this.playSong(_this.globalParam.songIndex+=1)}}},"link hash");else{if(0==(JSON.parse($.jStorage.get("k_play_list"))||[]).length)return void _this.warnAddSong();_this.playSong(_this.globalParam.songIndex)}location.href.indexOf("song-36")},commonConfig:function(){var kugouC=utility.read("KuGoo"),kugou_id=kugouC.KugooID;return{lvt:utility.formatDateTime(new Date),os:utility.detectOS(),browser:utility.getBrowser().type||"",uid:kugou_id||"",fo:"播放页",ivar1:-1!=location.href.indexOf("song-36")?"360定制版":"普通版"}},warnAddSong:function(){var _this=this,empty={hash:"",timelength:0,filesize:0,audio_name:"",have_album:0,album_name:"",album_id:0,img:"",have_mv:0,video_id:0,author_name:"",song_name:"",lyrics:"",author_id:0,privilege:0,privilege2:0,play_url:"",newlyrics:"",Hash:""};_this.updateUI(empty,function(){$(".btnArea2").hide(),$(".songWordContent .jspPane").html('<div class="no_song"><p class="nosong_tilte">暂无播放歌曲</p><p class="nosong_tip">你可以去酷狗网页添加歌曲</p><a class="goIndex" target="_blank" href="https://www.kugou.com/">去首页逛逛</a></div>'),$(".songjsAction .jspPane").html('<div class="noSongList"><p class="noSongListTip">队列中还没有歌曲</p><p class="addSongLink">去<a target="_blank"  href="https://www.kugou.com/" class="gotoIndex">首页</a>添加歌曲</p></div>')}),clearInterval(fanxingAdT),$(".fangxinAd").hide()},updateUI:function(option,callback){var _this=this;if(audioName=$(".audioName"),$content=$(".content"),$blurBg=$("#blurBg"),defaultImg="https://www.kugou.com/yy/static/images/play/default.jpg",$(".btnArea2").show(),void 0!==option.img&&""!=option.img&&null!=option.img||(option.img=defaultImg),-1==location.href.indexOf("song-36")&&("ie"==utility.getBrowser().type?($content[0].style.cssText=$content[0].style.cssText+"background-image: url('https://www.kugou.com/yy/static/images/iebg.jpg');",$blurBg.hide(),_this.resizeUI()):$blurBg[0].style.cssText="background-image: url('"+replaceHttpsImg(option.img)+"');"),option.have_album){var albumName_a=$(".albumName a"),albumImg_a=$(".albumImg a"),barAlbumImg_a=$(".bar-albumImg a"),albumLink="https://www.kugou.com/album/"+option.album_id+".html";$(".albumName").show(),albumName_a.length>0?albumName_a.text(option.album_name).attr("title",option.album_name).attr("href",albumLink):$(".albumName").html('<span class="fl fontColor">专辑：</span><a class="fl" href="'+albumLink+'" title="'+option.album_name+'">'+option.album_name+"</a>"),albumImg_a.length>0?(albumImg_a.attr("title",option.album_name).attr("href",albumLink),albumImg_a.find("img").attr("src",replaceHttpsImg(option.img))):$(".albumImg").html('<a class="fl" target="_blank" href="'+albumLink+'"title="'+option.album_name+'"><img onerror="this.onerror=null;this.src='+replaceHttpsImg(option.img)+'"  src='+replaceHttpsImg(option.img)+"></a>"),barAlbumImg_a.length>0?(barAlbumImg_a.attr("title",option.album_name).attr("href",albumLink),barAlbumImg_a.find("img").attr("src",replaceHttpsImg(option.img))):$(".bar-albumImg").html('<a target="_blank" href="'+albumLink+'"title="'+option.album_name+'"><img onerror="this.onerror=null;this.src='+replaceHttpsImg(option.img)+'" src='+replaceHttpsImg(option.img)+"></a>")}else $(".albumName").hide(),$(".albumImg,.bar-albumImg").html('<img src="'+replaceHttpsImg(option.img)+'">');option.have_mv?$(".btnMv").attr("href","https://www.kugou.com/mvweb/html/mv_"+option.video_id+".html").show():$(".btnMv").hide(),option.audio_name=$(".musiclist li.active").find(".musiclist-songname-txt").text(),void 0!==option.audio_name&&""!=option.audio_name&&null!=option.audio_name||(option.audio_name="酷狗音乐 - 就是歌多"),$("#songName,.audioName").html(option.audio_name).attr("title",option.audio_name),$("#songNameTemp:hidden").html(utility.playEncode(option.audio_name)).attr("title",option.audio_name),clearInterval(fanxingAdT),fanxingAdT=setInterval(function(){_this.fanxingAjax(option.audio_name)},2e4),_this.fanxingAjax(option.audio_name);var $singerName=$(".singerName"),singerHtml='<span class="fontColor">歌手：</span>',authors="",authorsTitle="";$(option.authors).each(function(index){"1"==$(this)[0].is_publish&&"0"!=$(this)[0].author_id?singerHtml+='<a target="_blank" href="https://www.kugou.com/singer/'+$(this)[0].author_id+'.html" title="'+$(this)[0].author_name+'">'+$(this)[0].author_name+"</a>":singerHtml+=$(this)[0].author_name,authors+=$(this)[0].author_name+"_",authorsTitle+=$(this)[0].author_name+"、"}),'<span class="fontColor">歌手：</span>'==singerHtml?$singerName.hide():$singerName.show().html(singerHtml).attr("title",authorsTitle),""!=option.audio_name&&null!=option.audio_name&&"undefined"!=option.audio_name?(document.title=option.audio_name+"_"+authors+"_高音质在线试听_"+option.audio_name+"歌词|歌曲下载_酷狗音乐 ",clearInterval(_this.globalParam.tilteSCroll),_this.globalParam.tilteSCroll=setInterval(function(){_this.titlescroll()},700)):(document.title="酷狗音乐",clearInterval(_this.globalParam.tilteSCroll)),option.audio_name&&(_this.globalParam.songName=utility.htmlEncode2(option.audio_name)),audioName.width()>430&&audioName.css({width:"430px",overflow:"hidden",whiteSpace:"nowrap",float:"left",textOverflow:"ellipsis"}),$(".no_song").remove();var word=option.lyrics.replace(/%/g,"\\"),songword=word.replace(/\[(.*)\]/g,'</p><p class="ie8FontColor">').replace(/<\/p>/,"")+"</p>";if(_this.globalParam.word=word,$(".songWordContentM .jspPane").length>0?$(".songWordContentM .jspPane").html(songword):($(".songWordContentM").html(songword),$(".songWordContent").jScrollPane({hijackInternalLinks:!0,animateScroll:!0,autoReinitialise:!0})),"undefined"==typeof myAudio&&null==myAudio&&(myAudio=document.getElementById("myAudio")),""==option.play_url){var flag1=option.hash&&""!=option.hash&&""==option.play_url,wranText="这首歌曲无版权暂不支持播放";if(option.privilege2){"0"==option.privilege2.split("").pop()&&(wranText="这首歌是付费歌曲请下载客户端播放")}if(flag1){dialog({id:"wrandialog",title:"提示",width:370,height:133,content:['<div class="dialogContent clearfix" id="forbidPlay">','<div class="contetText">'+wranText+"</div>",'<div class="dialogFooter clearfix">','<a class="btnDl" id="iKown">我知道了</a>',"</div>","</div>"].join(""),onshow:function(){$(".btnDl").off("click").on("click",function(e){e.preventDefault(),$(".ui-dialog-close").trigger("click"),_this.playSong(_this.globalParam.songIndex+=1)})},onclose:function(){_this.playSong(_this.globalParam.songIndex+=1)}}).show()}}else myAudio.src=option.play_url,myAudio.load();callback&&callback()},titlescroll:function(){var _this=this,title=document.title;if("酷狗音乐"!=title){var firstch=title.charAt(0),leftstr=title.substring(1,title.length);document.title=leftstr+firstch}else clearInterval(_this.globalParam.tilteSCroll)},fanxingAjax:function(songName){var _this=this;""!=songName&&"undefined"!=songName&&null!=songName?$.ajax({type:"GET",url:"https://fx1.service.kugou.com/fxmusic/pcad/lrcV1?jsonCallBack&songName="+encodeURIComponent(songName.toString().split("-").pop().trim()),dataType:"jsonp",success:function(res){if(""!=res.roomUrl){var Str=utility.QueryString(decodeURIComponent(res.roomUrl),"url"),roomid=Str.replace(/[^\d]/g,"");$(".fangxinAd").show(),$(".fangxinAd .singerImg").attr("src",replaceHttpsImg(res.imagePath)),$(".fangxinAd .singerName").html("【"+res.nickName+"】正在直播"),$(".fangxinAd .singingName").html(songName),/ipad/gi.test(navigator.userAgent.toLowerCase())?$(".fangxinAd .goto a").attr("href","http://mfanxing.kugou.com/staticPub/mobile/sharePage/normalRoom/views/index.html?roomId="+roomid):$(".fangxinAd .goto a").attr("href",res.roomUrl),$(".fangxinAd .goto a").off("click").on("click",function(e){e.preventDefault()}),$(".fangxinAd").off("click").on("click",function(e){try{(new Image).src="http://channel.fanxing.kugou.com/room/newkugouweb?room="+roomid+"&t="+Math.random()}catch(ex){}var clickObj=_this.commonConfig();clickObj.action="click",clickObj.b="点击歌词直播浮层",clickObj.a=210;var Clickdata=[30032,clickObj,null,0];apmCollectData.push(Clickdata);try{newLogCount()}catch(ex){}window.open($(this).find("a").attr("href"))});var fanxinObj=_this.commonConfig();fanxinObj.action="other",fanxinObj.b="歌词页直播浮层出现",fanxinObj.a=209;var fanxindata=[30032,fanxinObj,null,0];apmCollectData.push(fanxindata);try{newLogCount()}catch(ex){}}else $(".fangxinAd").hide()},error:function(res){clearInterval(fanxingAdT),$(".fangxinAd").hide()}}):clearInterval(fanxingAdT)},playSong:function(P_index){var _this=this;if(0!=_this.globalParam.songLength){var play_index=void 0!==P_index?P_index:_this.globalParam.songIndex+=1,PlayList=_this.getPlayList();if(Hash=void 0!==PlayList[play_index]&&void 0!==PlayList[play_index].Hash&&null!=PlayList[play_index].Hash&&""!=PlayList[play_index].Hash?PlayList[play_index].Hash:"",album_id=void 0!==PlayList[play_index]&&void 0!==PlayList[play_index].album_id&&null!=PlayList[play_index].album_id&&""!=PlayList[play_index].album_id.toString()?PlayList[play_index].album_id:"",playfrom=void 0!==PlayList[play_index]&&void 0!==PlayList[play_index].from&&null!=PlayList[play_index].from&&""!=PlayList[play_index].from.toString()?PlayList[play_index].from:"",audio_name=void 0!==PlayList[play_index]&&void 0!==PlayList[play_index].audio_name&&null!=PlayList[play_index].audio_name&&""!=PlayList[play_index].audio_name.toString()?PlayList[play_index].audio_name:"",bi_fo="","精选歌单"==playfrom?bi_fo="首页/精选歌单":-1!=playfrom.indexOf("热门榜单")?bi_fo="首页/"+playfrom:"新歌首发"==playfrom?bi_fo="首页/新歌首发":"search"==playfrom?bi_fo="搜索页":""!=playfrom?bi_fo="榜单页/"+playfrom:bi_fo="其他",$.jStorage.set("playdata",!0),_this.playListApi.scrollToY(40*play_index),$("#musicbox li").eq(play_index).addClass("active").siblings("li").removeClass("active"),""!=Hash&&""!=album_id.toString())location.hash="hash="+Hash+"&album_id="+album_id;else if(""!=Hash)location.hash="hash="+Hash;else if(""==Hash)return;var interfaceBI={};try{interfaceBI.ua=JSON.stringify(utility.getBrowser())||"低版本浏览器",interfaceBI.typeid=10005,interfaceBI.Hash=Hash}catch(ex){}$(".fangxinAd").hide();var interfaceT1=new Date;_this.getdatabyhash({Hash:Hash,album_id:album_id,callback:function(res){var interfaceT2=new Date;if(0!=res.status&&0!=res.data)if(interfaceBI.state=1,interfaceBI.timelength=interfaceT2-interfaceT1,interfaceBI.transaction={songname:res.data.audio_name,playsource:res.data.album_name||""},_this.updateUI(res.data),_this.globalParam.lyricsheight=$(".jspPane").height(),_this.globalParam.lyricsOverflowheight=$(".songWordContent").height(),$.ajax({type:"GET",url:"https://mips.kugou.com/check/iscn?&format=jsonp",dataType:"jsonp",timeout:3e3,success:function(res){if(res.status&&0==res.flag){dialog({id:"servicefail",width:310,height:50,title:"提示",skin:"unshare",cancel:!1,content:"抱歉，您所在的国家或地区暂无法提供此歌曲服务"}).showModal();return void setTimeout(function(){_this.globalParam.myAudio.pause(),$("#myAudio").remove(),_this.audioStop()},1e3)}},error:function(xhr,type){}}),""!=res.data.play_url&&_this.globalParam.fristFlag&&(_this.callExe({song_info:res.data,link:location.href,type:"play"}),_this.globalParam.fristFlag=!1),""!=res.data.play_url){playOpen(),_this.audioStart(),_this.playOnStart();var playbiObj=_this.commonConfig();playbiObj.action="index",playbiObj.a=6,playbiObj.b="播放",playbiObj.fo=bi_fo,playbiObj.ivar1="音频",playbiObj.ivar2=Hash,playbiObj.ivar3=audio_name;var bidata=[30032,playbiObj,null,0];apmCollectData.push(bidata);var interfacedata=[12,interfaceBI,null,1];apmCollectData.push(interfacedata);try{newLogCount()}catch(ex){}}else{interfaceBI.state=0,interfaceBI.te="E5",interfaceBI.position=1,interfaceBI.fs="1";var interfacedata=[12,interfaceBI,null,1];apmCollectData.push(interfacedata);try{newLogCount()}catch(ex){}_this.audioStop(),_this.setStatus()}else{interfaceBI.timelength=interfaceT2-interfaceT1,interfaceBI.state=0,interfaceBI.te="E3",interfaceBI.position=1,interfaceBI.fs=void 0!==res.info?res.info.status:"";var interfacedata=[12,interfaceBI,null,1];apmCollectData.push(interfacedata);try{newLogCount()}catch(ex){}clearInterval(fanxingAdT),$(".fangxinAd").hide(),_this.audioStop();var title="获取数据失败";msg="获取数据失败，稍后重试",res&&0==res.status&&res.err_code&&30010==res.err_code&&(title="服务器繁忙",msg="服务器繁忙，请稍后再尝试");dialog({id:"datafail",width:300,height:100,title:title,skin:"getdatafail",content:msg}).show()}}})}},playListbindUI:function(){var _this=this;$(".btnDownloadClient").off("click").on("click",function(e){e.preventDefault(),_this.downloadError({type:"current"})
    ;var data=_this.commonConfig();data.action="click",data.b="下载btn",data.a=200,data.ivar4="歌词";var Loaded=[30032,data];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}}),$(".clear").off("click").on("click",function(){_this.audioStop(),$(".musiclist").remove(),$.jStorage.set("k_play_list",null)}),$(".closePlayList").off("click").on("click",function(){$("#list").trigger("click")}),$(document).on("mousedown",function(){var $mode_panel=$("#mode_panel");_this.globalParam.showPlayFlag&&_this.showPlaylist(!1),"block"==$mode_panel.css("display")&&$mode_panel.hide()}),$("#musicbox .list-action-down").off("click").on("click",function(e){e.stopPropagation();var clickIndex=$(this).closest("li").index(),clickdata=_this.getPlayList()[clickIndex],Hash=clickdata.Hash,albumId=clickdata.album_id;_this.downloadError({type:"list",Hash:Hash,albumId:albumId,clickIndex:clickIndex});var data=_this.commonConfig();data.action="click",data.a=200,data.b="下载btn",data.ivar4="播放队列";var Loaded=[30032,data];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}}),$("#musicbox .list-action-share").off("click").on("click",function(e){e.stopPropagation();var data=_this.getPlayList()[$(this).closest("li").index()],Hash=data.Hash,albumId=data.album_id,listSongName=$(this).closest("li").find(".musiclist-songname-txt").text().trim(),listSingerName=$(this).closest("li").find(".musiclist-artist").text().trim();_this.getdatabyhash({Hash:Hash,album_id:albumId,callback:function(res){if(0!=res.status&&0!=res.data.length){var shareData=$.extend(res.data,{audio_name:listSingerName+"-"+listSongName});_this.share(shareData)}else{var sharefail=dialog({id:"sharefail",width:200,height:50,title:"分享失败",skin:"unshare",content:"分享失败，稍后重试"}).show();setTimeout(function(){sharefail.close().remove()},3e3)}}});var data=_this.commonConfig();data.action="click",data.b="分享btn",data.ivar4="ivar4",data.a=203;var Loaded=[30032,data];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}}),$("#musicbox .list-action-del").off("click").on("click",function(e){e.stopPropagation();var index=$(this).closest("li").index(),k_play_list=_this.getPlayList();k_play_list.splice(index,1),$.jStorage.set("k_play_list",JSON.stringify(k_play_list)),_this.playListApi.scrollToY(40*_this.globalParam.songIndex),index<_this.globalParam.songIndex?(_this.globalParam.songIndex--,_this.setActive(_this.globalParam.songIndex)):index==_this.globalParam.songIndex?(_this.globalParam.songIndex>=_this.globalParam.songLength-1&&(_this.globalParam.songIndex=0),_this.playSong(_this.globalParam.songIndex)):_this.setActive(_this.globalParam.songIndex)}),$("#musicbox .musiclist-item").off("click").on("click",function(){var index=($(this).attr("data-h"),$(this).parent().index());$(this).parent().addClass("active"),$(this).parent().siblings("li").removeClass("active"),_this.globalParam.songIndex=index,_this.playSong(index)})},showPlaylist:function(type){var _this=this,$playlist=$("#mod-playlist");1==type?($playlist.css({bottom:"80px"}),_this.globalParam.showPlayFlag=!0):($playlist.css({bottom:0-$playlist.height()+"px"}),_this.globalParam.showPlayFlag=!1)},setActive:function(index){$("#musicbox li").eq(index).addClass("active")},getdatabyhash:function(option){var _this=this,callbackF=0,retry=null;$.ajax({type:"GET",url:"https://wwwapi.kugou.com/yy/index.php?r=play/getdata",cache:!1,timeout:5e3,data:{hash:option.Hash,album_id:option.album_id},dataType:"jsonp",success:function(res,status,xhr){$.jStorage.set("playdata","true"),clearTimeout(retry),callbackF||option.callback&&option.callback(res),callbackF=1}}),retry=setTimeout(function(){$.ajax({type:"GET",url:"https://wwwapiretry.kugou.com/yy/index.php?r=play/getdata",cache:!1,timeout:1e4,data:{hash:option.Hash,album_id:option.album_id},dataType:"jsonp",success:function(res){$.jStorage.set("playdata","true"),callbackF||(option.callback&&option.callback(res),callbackF=1)},error:function(XMLHttpRequest,textStatus,errorThrown){$.jStorage.set("playdata","true"),option.callback({status:0,info:XMLHttpRequest}),_this.globalParam.isAudioStop=!0}})},3e3)},playList:function(){var _this=this,k_play_list=[],playExist=(new Date).getTime();if($.jStorage.set("playExist",playExist),$.jStorage.set("playFlag","true"),$.jStorage.listenKeyChange("playExist",function(key,action){$.jStorage.get("playExist")>playExist&&(playExist=$.jStorage.get("playExist"),_this.audioStop())}),k_play_list=$.jStorage.get("k_play_list")?JSON.parse($.jStorage.get("k_play_list"))||[]:[],null!=dataFromSmarty&&"undefined"!=typeof dataFromSmarty&&0!=dataFromSmarty.length&&""!=dataFromSmarty.length)for(var reverseData=dataFromSmarty.reverse(),i=0,len=reverseData.length;i<len;i++)reverseData[i].Hash=reverseData[i].hash,reverseData[i].audio_name=reverseData[i].song_name,null!=reverseData[i].Hash&&""!=reverseData[i].Hash&&void 0!==reverseData[i].Hash&&k_play_list.unshift(reverseData[i]);k_play_list=_.uniq(k_play_list,"Hash"),_this.globalParam.songLength=k_play_list.length,$("#list_count").html(k_play_list.length),$(".box-header span").eq(0).html(k_play_list.length),_this.renderPlayList(k_play_list),0!=k_play_list.length&&_this.showTip(),$.jStorage.set("k_play_list",JSON.stringify(k_play_list)),$.jStorage.listenKeyChange("newsong",function(key,action){$.jStorage.set("playdata",!0);var newSong=JSON.parse($.jStorage.get("newsong"));_.isArray(newSong)&&(k_play_list=JSON.parse($.jStorage.get("k_play_list"))||[],k_play_list=utility.insertArrayAt(k_play_list,0,newSong),k_play_list=_.uniq(k_play_list,"Hash"),$.jStorage.set("k_play_list",JSON.stringify(k_play_list)),_this.globalParam.songIndex=0,_this.playSong(_this.globalParam.songIndex),_this.showTip(),$("#musicbox li").eq(_this.globalParam.songIndex).addClass("active"))}),$.jStorage.listenKeyChange("k_play_list",function(key,action){var newPlaySong=JSON.parse($.jStorage.get("k_play_list"))||[];_.isArray(newPlaySong)&&(k_play_list=newPlaySong,$("#list_count").text(newPlaySong.length),$(".box-header span").eq(0).html(newPlaySong.length),_this.globalParam.songLength=newPlaySong.length,_this.renderPlayList(newPlaySong),_this.playListbindUI()),0==newPlaySong.length&&_this.warnAddSong()})},showTip:function(){$(".play_tips:hidden").show().animate({opacity:1});setTimeout(function(){$(".play_tips").animate({opacity:0})},1e3)},getPlayList:function(){var PlayList=JSON.parse($.jStorage.get("k_play_list"))||[];if(_.isArray(PlayList))return PlayList},renderPlayList:function(data){var _this=this,PlayListStr='<div class="musiclist">',actionDom=$("#musicbox .jspPane");if(0!=data.length){$(".noSongList").remove();for(var i=0,len=data.length;i<len;i++)if(void 0!==data[i].Hash||null!=data[i].Hash||""!=data[i].Hash){var authorNames,songname,tempLen=data[i].timelength.toString().length,restime=tempLen=="345".length?1e3*data[i].timelength:data[i].timelength,time=utility.getMS(restime);data[i].Hash,data[i].album_id;if(""!=data[i].author_name)songname=data[i].audio_name,authorNames=data[i].author_name;else{var splitIndex=data[i].audio_name.indexOf("-");songname=data[i].audio_name.substring(splitIndex+1),authorNames=data[i].audio_name.substring(0,splitIndex)}PlayListStr+='<li><div class="musiclist-item clearfix"><span class="musiclist-number">'+(i+1)+'</span><div class="musiclist-name"><span class="musiclist-songname-txt" title="'+songname+'">'+songname+'</span><div class="mod-list-menu"><a href="javascript:;" class="icon list-menu-item icon-playbar-download list-action-down" title="下载"><i class="icon list-menu-icon-down"></i><span class="icon_txt">下载</span></a><a href="javascript:;" class="icon list-menu-item icon-playbar-share list-action-share" title="分享"><i class="icon list-menn-icon-share"></i><span class="icon_txt">分享</span></a><a href="javascript:;" class="icon list-menu-item list-menu-icon-del list-action-del" title="删除歌曲"><i class="icon list-menu-icon-add"></i><span class="icon_txt">删除</span></a></div></div><div class="musiclist-artist" title="'+authorNames+'">'+authorNames+'</div><div class="musiclist-time">'+time+"</div></div></li>"}PlayListStr+="</div>",_this.height=actionDom.height(),actionDom.height(_this.height),actionDom.empty().append(PlayListStr).attr("style","")}else $(".musiclist").remove(),_this.setStatus()},callExe:function(option){var type=option.type,comeFrom=option.link;controlData="",$.isEmptyObject(option.song_info)||(songData=option.song_info,privilege2=songData.privilege2?"0"==songData.privilege2.split("").pop():"1",songWord=songData.audio_name.length>58?songData.audio_name.substring(0,58)+"...":songData.audio_name,controlData='{"Files":[{"filename":"'+songWord+'.mp3","hash":"'+songData.hash+'","size":"'+songData.filesize+'","duration":"'+songData.timelength+'","bitrate":"128","isfilehead":"100","privilege":"'+songData.privilege+'","album_id":"'+songData.album_id+'"}]}');var callT=setTimeout(function(){$.ajax({url:"https://www.kugou.com/yy/static/js/jslib/base.js?"+Math.round((new Date).getTime()/1e3),dataType:"script",success:function(){if("download"==type){var url="kugou://"+type+"?p="+Base64.encode(controlData);"Mac"==utility.detectOS()&&(url="mackugou://"+type+"?p="+Base64.encode(controlData)),6==utility.getBrowser().v||7==utility.getBrowser().v||8==utility.getBrowser().v?window.open(url):$("#apply:hidden").attr("src",url)}else if("play"==type&&(-1!=comeFrom.indexOf("frombaidu")||-1!=comeFrom.indexOf("from_360")||-1!=comeFrom.indexOf("from_sogou"))){var url="kugou://"+type+"?p="+Base64.encode(controlData);6==utility.getBrowser().v||7==utility.getBrowser().v||8==utility.getBrowser().v?window.open(url):$("#apply:hidden").attr("src",url)}clearTimeout(callT)},error:function(){clearTimeout(callT)}})},1e3)},resizeUI:function(){if(-1==location.href.indexOf("song-36")){var winHeight=($(window).width(),$(window).height()),headerH=$(".header").height(),navWrapH=$(".navWrap").height(),contentHeight=winHeight-headerH-navWrapH,singerContent=($(".bg-blur"),$(".singerContent")),songWordContent=$(".songWordContent");$("#blurBg").height(contentHeight),$(".content").height(contentHeight),$(".mainPage").height(winHeight),winHeight<=895?singerContent.css({marginTop:100-(895-winHeight)/2<=10?10:100-(895-winHeight)/2}):singerContent.css({marginTop:100}),winHeight<=780?songWordContent.css({height:410-(780-winHeight)<=235?235:410-(780-winHeight)}):songWordContent.css({height:410})}},downloadError:function(option){var _this=this,option=option;_this.downloadd||(_this.downloadd=dialog({id:"downloadd",title:"提示",width:380,height:170,skin:"playsong",fixed:!0,content:[' <div class="dialogContent clearfix" id="download">','<div class="contetText">','<p><span class="warn_icon"><img src="https://www.kugou.com/yy/static/images/play/warn.png"></span>下载歌曲需要在酷狗音乐客户端操作</p></div>','<div class="dialogFooter clearfix">','<a href="#" class="callClient">打开客户端</a>',"<a href=\"#\" class=\"btnDl\" onclick=\"_hmt.push(['_trackEvent', 'song3software', 'song3download', 'song3kugou']);\" >下载新版客户端</a>","</div>"," </div>"].join(""),onshow:function(){$(".ui-dialog").mousedown(function(){"80px"==$("#mod-playlist").css("bottom")&&_this.showPlaylist(!0)}),$(".btnDl").off("click").on("click",function(e){if(e.preventDefault(),/ipad/i.test(navigator.userAgent))_this.ipadJumpLink();else{var data=(window.open(window.downloadUrl),_this.commonConfig());data.action="click",data.b="歌曲下载弹窗-下载新版客户端btn",data.a=202;var Loaded=[30032,data];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}_this.downloadd.close().remove()}}),$(".callClient").off("click").on("click",function(e){if(e.preventDefault(),/ipad/i.test(navigator.userAgent))_this.ipadJumpLink();else{var currentHash=null;if("current"==option.type){var currentHash="",currentAlbumId="",currentIndex=$(".musiclist .active").index();listSongName=$(".musiclist li.active").find(".musiclist-songname-txt").text().trim(),listSingerName=$(".musiclist li.active").find(".musiclist-artist").text().trim(),_this.getPlayList().length&&(currentHash=_this.getPlayList()[currentIndex].Hash,currentAlbumId=_this.getPlayList()[currentIndex].album_id)}else if(option.type="list"){var currentHash=option.Hash;currentAlbumId=option.album_id,listSongName=$(".musiclist li").eq(option.clickIndex).find(".musiclist-songname-txt").text().trim(),listSingerName=$(".musiclist li").eq(option.clickIndex).find(".musiclist-artist").text().trim()}""==currentHash?_this.callExe({type:"download",song_info:{},link:location.href}):_this.getdatabyhash({Hash:currentHash,album_id:currentAlbumId||0,callback:function(res){if(0!=res.status&&0!=res.data.length){var downloadData=$.extend(res.data,{audio_name:listSingerName+"-"+listSongName});_this.callExe({type:"download",song_info:downloadData,link:location.href})}}});var data=_this.commonConfig();data.action="click",data.b="歌曲下载弹窗-打开客户端btn",data.a=201;var Loaded=[30032,data];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}_this.downloadd.close().remove()}})},onclose:function(){_this.downloadd=null}}),_this.downloadd.show())},downLoad:function(a,b,callback){var c,d,e,f;window.downloadUrl;if(a=unescape(a),0==b)return alert("请先选择歌曲！"),!1;try{if(c=null,c=window.kugouAX?window.kugouAX:new ActiveXObject("KuGoo3DownXControl.KuGoo3Down"),a=JSON.parse(a),d="",b>1)for(e=0;e<a.length;e++)d+=a[e].FileName+"|"+a[e].FileSize+"|"+a[e].Hash+"\\\\";else d=a[0].FileName+"|"+a[0].FileSize+"|"+a[0].Hash+"\\\\";f=d,c.SendString(12,b,f)}catch(g){callback&&callback()}},playInit:function(){var _this=this;_this.globalParam.$playhead=$("#playhead"),_this.globalParam.$progress=$("#progress");try{for(var lastTime=0,vendors=["webkit","moz","ms","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)})}catch(ex){}window.audioPlayerAnimloop=function(){_this.globalParam.isAudioStop||(_this.audioRender(),_this.globalParam.songW>290&&_this.render(),_this.globalParam.globalID=requestAnimationFrame(audioPlayerAnimloop))},_this.bindUI()},bindUI:function(){var _this=this;"undefined"==typeof myAudio&&null==myAudio&&(myAudio=document.getElementById("myAudio")),_this.globalParam.myAudio=myAudio,myAudio.controls=!1,myAudio.autobuffer=!0,myAudio.preload="auto",myAudio.addEventListener("loadstart",function(e){}),myAudio.addEventListener("durationchange",function(e){var t=Math.floor(myAudio.duration);_this.getDuration(t)}),myAudio.addEventListener("loadedmetadata",function(e){if(myAudio.duration){var t=Math.floor(myAudio.duration);_this.getDuration(t)}}),myAudio.addEventListener("loadeddata",function(e){}),myAudio.addEventListener("progress",function(e){}),myAudio.addEventListener("canplay",function(e){_this.globalParam.isFirstPlay||myAudio.paused&&_this.toggleSound()}),myAudio.addEventListener("canplaythrough",function(e){}),myAudio.addEventListener("abort",function(e){}),myAudio.addEventListener("emptied",function(e){}),myAudio.addEventListener("ended",function(e){_this.globalParam.wordArrHTML&&(_this.globalParam.ind=-2,_this.globalParam.wordArrHTML.removeClass("playOver"),_this.globalParam.wordArrHTML=null),$("#toggle").addClass("icon icon-playbar-play"),_this.globalParam.isAudioStop=!0,_this.audioStop(),$("#mode").hasClass("icon-playbar-cycle")?_this.globalParam.songIndex==_this.globalParam.songLength-1?_this.globalParam.songIndex=0:_this.globalParam.songIndex++:$("#mode").hasClass("icon-playbar-singlecycle")?(playOver(),playOpen()):$("#mode").hasClass("icon-playbar-randomcycle")&&(_this.globalParam.songIndex=Math.floor(_this.globalParam.songLength*Math.random())),_this.playSong(_this.globalParam.songIndex)}),myAudio.addEventListener("error",function(e,f){var errorCode=myAudio.error.code;if(2==errorCode||3==errorCode||4==errorCode){var playError=dialog({id:"unsupportshare",width:300,height:180,title:"提示",skin:"playsong",content:['<div class="addsong clearfix" id="addsong">','<div class="contetText">该音频不支持网页播放请下载客户端播放</div>',"</div>"].join("")}).show();setTimeout(function(){playError.close().remove()},3e3)}}),myAudio.addEventListener("pause",function(){if($("#toggle").hasClass("icon-playbar-pause")){document.getElementById("toggle").className="icon icon-playbar-play"}_this.globalParam.isAudioStop||_this.audioStop()}),myAudio.addEventListener("play",function(){if($("#toggle").hasClass("icon-playbar-play")){document.getElementById("toggle").className="icon icon-playbar-pause"}_this.globalParam.isAudioStop&&_this.audioStart()}),myAudio.addEventListener("playing",function(e){}),myAudio.addEventListener("ratechange",function(){}),myAudio.addEventListener("seeked",function(){}),myAudio.addEventListener("seeking",function(){}),myAudio.addEventListener("stalled",function(){}),myAudio.addEventListener("suspend",function(){}),myAudio.addEventListener("timeupdate",function(){}),myAudio.addEventListener("volumechange",function(){}),myAudio.addEventListener("waiting",function(){}),$("#toggle").off("click").on("click",function(){_this.globalParam.isFirstPlay&&(_this.globalParam.isFirstPlay=!1),_this.toggleSound()}),$("#prev").off("click").on("click",function(){_this.globalParam.songLength>0&&_this.playPrevSong()}),$("#next").off("click").on("click",function(){_this.globalParam.songLength>0&&_this.playNextSong()}),$("#bar").off("click").on("click",function(e){if(!_this.globalParam.isAudioStop&&e.target!=document.getElementById("playhead")){var pre=e.offsetX/$("#progress_middle").width();pre=pre>1?1:pre;var msec=myAudio.duration*pre;_this.setPositioningPlay(msec)}});var $playhead=$("#playhead"),$progress=$("#progress"),$drag_playhead=$("#drag_playhead");$playhead.mousedown(function(e){e.stopPropagation(),_this.globalParam.isPlayDrop=!0,_this.globalParam.beginClientX=e.clientX;var str=$playhead.css("margin-left");_this.globalParam.begingPlayHeadX=Number(str.replace("px",""))}),$(document).on("mousemove",function(e){if(_this.globalParam.isPlayDrop)if(_this.globalParam.begingPlayHeadX+(e.clientX-_this.globalParam.beginClientX)<=0)$progress.css("width","0"),$playhead.css("margin-left","0");else if(_this.globalParam.begingPlayHeadX+(e.clientX-_this.globalParam.beginClientX)>=$drag_playhead.width())$progress.css("width","100%"),$playhead.css("margin-left","100%");else{var pre=(_this.globalParam.begingPlayHeadX+(e.clientX-_this.globalParam.beginClientX))/$drag_playhead.width();pre=pre.toFixed(4),_this.setProgress(pre)}}),$(document).on("mouseup",function(e){if(_this.globalParam.isPlayDrop)if(_this.globalParam.isPlayDrop=!1,_this.globalParam.begingPlayHeadX+(e.clientX-_this.globalParam.beginClientX)<=0)$progress.css("width","0"),$playhead.css("margin-left","0"),_this.setPositioningPlay(0);else if(_this.globalParam.begingPlayHeadX+(e.clientX-_this.globalParam.beginClientX)>=$drag_playhead.width())$progress.css("width","100%"),$playhead.css("margin-left","100%"),_this.setPositioningPlay(myAudio.duration);else{var pre=(_this.globalParam.begingPlayHeadX+(e.clientX-_this.globalParam.beginClientX))/$drag_playhead.width();pre=pre.toFixed(4),_this.setProgress(pre);var msec=myAudio.duration*pre;_this.setPositioningPlay(msec)}});var panelT=null,volume_panel=$("#volume_panel"),volume_icon=$("#volume_icon");$("#volume").mouseenter(function(){volume_icon.hasClass("disabled")||volume_panel.show()}).mouseleave(function(e){volume_icon.hasClass("disabled")||(panelT=setTimeout(function(){volume_panel.hide()},300))}).on("click",function(){volume_icon.hasClass("icon-playbar-silence")?(volume_icon.removeClass("icon-playbar-silence").addClass("icon-playbar-minvox"),_this.setMute(!1),0==_this.globalParam.volumeNum&&(_this.globalParam.volumeNum="0.6",_this.setVolumeProgress(1-_this.globalParam.volumeNum)),_this.setVolume(_this.globalParam.volumeNum)):(volume_icon.removeClass("icon-playbar-minvox").addClass("icon-playbar-silence"),_this.setMute(!0))}),$("#volume_control").off("click").on("click",function(e){if(!volume_icon.hasClass("disabled")){var _screenH=Math.floor($("body").height());if(e.target!=document.getElementById("volumehead")){var pre=(e.clientY-(_screenH-175))/80;pre=pre>1?1:pre,_this.setVolumeProgress(pre);var vol=1-pre;_this.setVolume(vol)}}}),$("#volumehead").off("mousedown").mousedown(function(e){if(!volume_icon.hasClass("disabled")){_this.globalParam.isVolumeDrop=!0,_this.globalParam.beginClientY=e.clientY;var str=$("#volumehead").css("top");_this.globalParam.begingVolumeHeadY=Number(str.replace("px",""))}}),volume_panel.mouseenter(function(){$(this).show(),clearTimeout(panelT)}).mouseleave(function(e){$(this).hide()}).mousemove(function(e){if(!volume_icon.hasClass("disabled")&&_this.globalParam.isVolumeDrop)if(_this.globalParam.begingVolumeHeadY+(e.clientY-_this.globalParam.beginClientY)<=0)$("#volume_progress").css("top","0"),$("#volumehead").css("top","0"),_this.setVolume(1);else if(_this.globalParam.begingVolumeHeadY+(e.clientY-_this.globalParam.beginClientY)>=80)$("#volume_progress").css("top","83px"),$("#volumehead").css("top","80px"),_this.setVolume(0);else{var pre=(_this.globalParam.begingVolumeHeadY+(e.clientY-_this.globalParam.beginClientY))/80;pre=pre.toFixed(4),_this.setVolumeProgress(pre);var vol=1-pre;_this.setVolume(vol)}}).mouseup(function(e){if(!volume_icon.hasClass("disabled")&&_this.globalParam.isVolumeDrop)if(_this.globalParam.isVolumeDrop=!1,_this.globalParam.begingVolumeHeadY+(e.clientY-_this.globalParam.beginClientY)<=0)$("#volume_progress").css("top","0"),$("#volumehead").css("top","0"),_this.setVolume(1);else if(_this.globalParam.begingVolumeHeadY+(e.clientY-_this.globalParam.beginClientY)>=80)$("#volume_progress").css("top","83px"),$("#volumehead").css("top","80px"),_this.setVolume(0);else{var pre=(_this.globalParam.begingVolumeHeadY+(e.clientY-_this.globalParam.beginClientY))/80;pre=pre.toFixed(4),_this.setVolumeProgress(pre);var vol=1-pre;_this.setVolume(vol)}}),$("#mode").off("click").on("click",function(e){e.stopPropagation(),$("#mode_panel").is(":hidden")?$("#mode_panel").show():$("#mode_panel").hide()}),$("#pb_share").off("click").on("click",function(){var currentHash=_this.getPlayList()[_this.globalParam.songIndex].Hash,currentAlbumId=_this.getPlayList()[_this.globalParam.songIndex].album_id,currentDom=$("#musicbox .active"),listSongName=currentDom.find(".musiclist-songname-txt").text().trim(),listSingerName=currentDom.find(".musiclist-artist").text().trim();_this.getdatabyhash({Hash:currentHash,album_id:currentAlbumId,callback:function(res){if(0!=res.status&&0!=res.data.length){var shareData=$.extend(res.data,{audio_name:listSingerName+"-"+listSongName});_this.share(shareData)}else{var shareFail=dialog({id:"shareFail",width:200,height:50,title:"分享失败",skin:"unshare",content:"分享失败，稍后重试"}).show();setTimeout(function(){shareFail.close().remove()},3e3)}}});var data=_this.commonConfig();data.action="click",data.b="分享btn",data.ivar4="ivar4",data.a=203;var Loaded=[30032,data];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}}),$("#pb_download").off("click").on("click",function(){_this.downloadError({type:"current"});var data=_this.commonConfig();data.action="click",data.b="下载btn",data.ivar4="播放条",data.a=200;var Loaded=[30032,data];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}}),$("#mode_panel li").off("click").on("click",function(e){e.stopPropagation();var clickIndex=$(this).index(),oldMode="",newMode="";$("#mode").hasClass("icon-playbar-singlecycle")?oldMode="单曲循环":$("#mode").hasClass("icon-playbar-cycle")?oldMode="列表循环":$("#mode").hasClass("icon-playbar-randomcycle")&&(oldMode="随机播放"),$(this).find("a").addClass("mode-selected"),$(this).siblings("li").find("a").removeClass("mode-selected"),$(this).find(".icon").addClass("active"),$(this).siblings("li").find(".icon").removeClass("active"),1==clickIndex?($("#mode").attr("class","icon icon-playbar-singlecycle"),newMode="单曲循环"):0==clickIndex?($("#mode").attr("class","icon icon-playbar-cycle"),newMode="列表循环"):2==clickIndex&&($("#mode").attr("class","icon icon-playbar-randomcycle"),newMode="随机播放");var data=_this.commonConfig();data.action="click",data.b="播放条-切换播放模式",data.ivar4=oldMode,data.ivar5=newMode,data.a=205;var Loaded=[30032,data];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}$("#mode_panel").hide()}),$("#showHide_playbar").off("click").click(function(e){$(this).hasClass("show-playbar-btn")?($(this).attr("class","icon hide-playbar-btn"),$("#audioModule").animate({bottom:"-80px"})):($(this).attr("class","icon show-playbar-btn"),$("#audioModule").animate({bottom:"0px"}))}),$("#list").off("click").on("click",function(e){e.stopPropagation(),_this.globalParam.showPlayFlag?_this.showPlaylist(!1):_this.showPlaylist(!0)});$("#list,#toggle,#mode_panel,#prev,#next,#volume_icon,#mode,#pb_download,#playhead,#mod-playlist").on("mousedown",function(e){e.stopPropagation()}),$(".songDetail .singerName").off("click").on("click","a",function(e){if(e.preventDefault(),0!=$(this).length){window.open($(this).attr("href"));var data=_this.commonConfig();data.action="click",data.b="歌词-歌手名txt",data.a=206;var Loaded=[30032,data];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}}}),$(".songDetail .albumName").off("click").on("click",function(e){if(e.preventDefault(),0!=$(this).find("a").length){var data=_this.commonConfig();data.action="click",data.b="歌词-专辑名txt",data.a=207;var Loaded=[30032,data];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}window.open($(this).find("a").attr("href"))}}),$(".btnMv").off("click").on("click",function(e){e.preventDefault();var data=_this.commonConfig();data.action="click",data.b="歌词-歌名右侧mvbtn",data.a=208;var Loaded=[30032,data];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}window.open(this.href)})},lyricsPlay:function(msec){var _this=this,_len=_this.globalParam.wordArrLen,_arr=_this.globalParam.wordArr,i=0,_t=-1;for(i=0;i<_len&&_arr[i]<=msec;i++)_t=i;if(_arr=null,_t!=_this.globalParam.ind&&_this.globalParam.wordArrHTML){_this.globalParam.ind=_t;var tempObj=$(".songWordContent .jspPane p"),_end=0;if(-1==_t)$(".playOver").removeClass("playOver"),_end=0;else{tempObj.each(function(ind){ind==_t?$(this).addClass("playOver"):$(this).hasClass("playOver")&&$(this).removeClass("playOver")}),_end=_t<=2?0:102-34*_t;var lyricsOverflowHeight=_this.globalParam.lyricsOverflowheight,lyricsHeight=_this.globalParam.lyricsheight;Math.abs(_end)+lyricsOverflowHeight>lyricsHeight&&(_end=0-lyricsHeight+lyricsOverflowHeight)}try{var _wordArrObj=$(".songWordContent .jspPane"),str=_wordArrObj.css("top");Number(str.replace("px",""));_wordArrObj.animate({top:_end})}catch(ex){}}},playOnStart:function(){var _this=this;_this.globalParam.isAudioStop||_this.stop();var songName=$(".controls-songName"),songNameTemp=$("#songNameTemp");_this.globalParam.songW=Math.floor(songNameTemp.width());var str="";290>=_this.globalParam.songW?(str+='<span class="songName" id="songName">'+_this.globalParam.songName+"</span>",songName.html(str)):(str+='<span class="songName" id="songName">'+_this.globalParam.songName+"</span>",str+='<span class="songName" id="songName2">'+_this.globalParam.songName+"</span>",songName.html(str)&&(_this.globalParam.songNameEle1=$("#songName"),_this.globalParam.songNameEle2=$("#songName2")),_this.globalParam.songNameEle1Left=0,setTimeout(function(){_this.globalParam.songNameEle2Left=_this.globalParam.songW+30,_this.globalParam.songNameEle2[0].style.marginLeft=_this.globalParam.songNameEle2Left+"px",_this.globalParam.isAudioStop&&_this.start()},500));var vol=$.jStorage.get("kVolume");null!=vol&&void 0!==vol?(_this.globalParam.volumeNum=vol,0==vol?(_this.setMute(!0),_this.setVolume(vol)):(_this.setVolumeProgress(1-vol),_this.setVolume(vol))):(_this.setVolumeProgress(.4),_this.setVolume(.6))},toggleSound:function(){var myAudio=document.getElementById("myAudio");if(null!=myAudio&&""!=myAudio.src&&"//www.kugou.com/song/"!=myAudio.src){var toggle=document.getElementById("toggle");myAudio.paused?(myAudio.play(),toggle.className="icon icon-playbar-pause",this.audioStart()):(myAudio.pause(),toggle.className="icon icon-playbar-play",this.audioStop())}},playPrevSong:function(){var _this=this;$("#mode").hasClass("icon-playbar-randomcycle")?_this.globalParam.songIndex=Math.floor(_this.globalParam.songLength*Math.random()):(0==this.globalParam.songIndex&&(this.globalParam.songIndex=this.globalParam.songLength),_this.globalParam.songIndex--),_this.playSong(this.globalParam.songIndex)},playNextSong:function(){var _this=this;$("#mode").hasClass("icon-playbar-randomcycle")?_this.globalParam.songIndex=Math.floor(_this.globalParam.songLength*Math.random()):(_this.globalParam.songIndex++,_this.globalParam.songIndex=this.globalParam.songIndex%this.globalParam.songLength),_this.playSong(this.globalParam.songIndex)},playError:function(){this.setStatus()},playStop:function(){this.toggleSound()},setStatus:function(){this.globalParam.isStop||this.stop(),document.getElementById("toggle").className="icon icon-playbar-play",this.globalParam.songW=0,this.globalParam.songName="",$("#playhead").hide(),$("#progress_bar").hide();var songName=$(".controls-songName");songName.attr("title",""),songName.html('<span class="songName" id="songName">酷狗音乐</span>'),$(".change-time,.all-time").text("00:00"),this.setProgress(0)},audioStart:function(){var myAudio=document.getElementById("myAudio");null!=myAudio&&""!=myAudio.src&&"//www.kugou.com/song/"!=myAudio.src&&($("#playhead").show(),$("#progress_bar").show(),myAudio.play(),this.globalParam.isAudioStop=!1,this.globalParam.globalID=requestAnimationFrame(audioPlayerAnimloop))},audioStop:function(){var myAudio=document.getElementById("myAudio");null!=myAudio&&""!=myAudio.src&&"//www.kugou.com/song/"!=myAudio.src&&(myAudio.pause(),this.globalParam.isAudioStop=!0,cancelAnimationFrame(this.globalParam.globalID))},audioRender:function(){var myAudio=this.globalParam.myAudio;if(myAudio.readyState>0&&!this.globalParam.isPlayDrop){var pre=myAudio.currentTime/myAudio.duration;pre=pre.toFixed(4),JSPositioningPlay(pre,Math.floor(1e3*myAudio.currentTime))}},start:function(){this.globalParam.isAudioStop=!1,this.globalParam.globalID=requestAnimationFrame(audioPlayerAnimloop)},stop:function(){this.globalParam.isAudioStop=!0,cancelAnimationFrame(this.globalParam.globalID)},render:function(){var _this=this;if(++_this.globalParam.doubEx%2!=1){var sn1=_this.globalParam.songNameEle1,sn2=_this.globalParam.songNameEle2;_this.globalParam.songNameEle1Left<-this.globalParam.songW?_this.globalParam.songNameEle1Left=_this.globalParam.songNameEle2Left+this.globalParam.songW+30:_this.globalParam.songNameEle1Left--,sn1[0].style.marginLeft=_this.globalParam.songNameEle1Left+"px",_this.globalParam.songNameEle2Left<-this.globalParam.songW?_this.globalParam.songNameEle2Left=_this.globalParam.songNameEle1Left+this.globalParam.songW+30:_this.globalParam.songNameEle2Left--,sn2[0].style.marginLeft=_this.globalParam.songNameEle2Left+"px"}},setPlayDuration:function(msec){var ms=utility.getMS(msec);$("#duration .change-time").text(ms)},getDuration:function(msec){var t=this;t.globalParam.songDuration=msec;var ms=utility.getMS(1e3*msec);t.globalParam.duration=ms,$("#duration .all-time").text(ms)},setProgress:function(pro){var _this=this;pro*=100,_this.globalParam.$progress.css("width",pro+"%"),_this.globalParam.$playhead.css("margin-left",pro+"%")},setPositioningPlay:function(msec){this.globalParam.myAudio.currentTime=msec},setMute:function(b){var myAudio=this.globalParam.myAudio;b?(myAudio.muted=!0,$.jStorage.set("kVolume",0),$("#volume_progress").css("top","83px"),$("#volumehead").css("top","80px")):(myAudio.muted=!1,this.setVolumeProgress(1-this.globalParam.volumeNum),$.jStorage.set("kVolume",this.globalParam.volumeNum),this.setVolume)},
    setVolumeProgress:function(pro){var prog=80*Number(pro),head=83*Number(pro);$("#volume_progress").css("top",prog+"px"),$("#volumehead").css("top",head+"px")},setVolume:function(vol){var myAudio=this.globalParam.myAudio;myAudio.volume=vol,$.jStorage.set("kVolume",vol);var t=this;vol>0?(myAudio.muted=!1,t.globalParam.volumeNum=vol,vol>.33?(t.globalParam.volumeMode="icon icon-playbar-maxvox",$("#volume_icon").attr("class","icon icon-playbar-maxvox")):(t.globalParam.volumeMode="icon icon-playbar-minvox",$("#volume_icon").attr("class","icon icon-playbar-minvox"))):$("#volume_icon").attr("class","icon icon-playbar-silence")},setVolumeInteraction:function(hover){hover?$("#volume_icon").removeClass("disabled"):$("#volume_icon").addClass("disabled")},shared:null,downloadd:null,hashQueryShortUrl:function(option,callback){var _this=this,filename=option.audio_name,hash=option.hash,album_id=option.album_id||0,md5Str=Md5.md5(hash+"kgclientshare"),from="weixin"==option.chl?"webCode":"",dataObj={cmid:1,filename:filename,hash:hash,album_id:album_id,is_short:1,md5:md5Str,chl:option.chl||"weixin",codes:1,from:from};$.ajax({type:"get",url:"https://tservice.kugou.com/app/",timeout:5e3,dataType:"jsonp",jsonp:"callback",data:dataObj,success:function(res){res&&(res.status?($(".qrcode").find("img").attr("src",res.codes_url),callback&&callback(res)):31001==res.err_code&&(setTimeout(function(){_this.shareIsCanClick=!0},1e3),$(".qrcode").find("img").attr("src","https://www.kugou.com/yy/static/images/share_false.jpg"),callback&&callback("")))},error:function(xhr,type){callback&&callback("")}})},share:function(data){var _this=this,sharePic="https://www.kugou.com/yy/static/images/share-cover.png";authors="",$(data.authors).each(function(i){authors+=data.authors[i].author_name+" "});var shareTitle=authors+"-"+data.song_name,shareIntro="我在酷狗常听的《"+shareTitle+"》，你也来听听吧！（来自 web 酷狗音乐）";_this.shared||(_this.shared=dialog({id:"share",title:"分享歌曲",skin:"share_popup",fixed:!0,content:["<div id='share_list'>"," <dl>","<dt class='share_weixin'></dt>","<dd class='qrcode'><img src='' /></dd>","<dd>微信</dd>","</dl>","<dl>","<dt class='share_friend'></dt>","<dd>QQ好友</dd>","</dl>","<dl>","<dt class='share_qzone'></dt>","<dd>QQ空间</dd>","</dl>","<dl>","<dt class='share_weibo'></dt>","<dd>新浪微博</dd>","</dl>","</div>"].join(""),onshow:function(){$(".ui-dialog").mousedown(function(){return"80px"==$("#mod-playlist").css("bottom")&&_this.showPlaylist(!0),!1}),data.chl="weixin",_this.hashQueryShortUrl(data,function(res){var shareShortUrl=res.data;$(".share_weixin").mouseover(function(){$(".qrcode").show()}).mouseout(function(){$(".qrcode").hide()}),""!=shareShortUrl&&31001!=res.err_code||_this.upSupportShare("微信")}),$.ajax({type:"get",url:"https://www.kugou.com/root/getSongCover?hash="+data.hash,timeout:3e3,cache:!1,success:function(res){1==res.status&&$.isArray(res.data)&&res.data[0]&&""!=res.data[0].sizable_cover&&(sharePic=res.data[0].sizable_cover.replace(/{size}/,135))},error:function(xhr,type){}}),$(".share_friend").on("click",function(){var newWin=window.open("");data.chl="qq",_this.hashQueryShortUrl(data,function(res){var shareShortUrl=res.data;""==shareShortUrl||31001==res.err_code?_this.upSupportShare("QQ"):"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?window.open("http://connect.qq.com/widget/shareqq/index.html?url="+encodeURIComponent(shareShortUrl)+"&desc=&title="+encodeURIComponent(shareTitle)+"&summary="+encodeURIComponent(shareIntro)+"&pics="+sharePic+"&flash=&site=www.kugou.com"):newWin.location="http://connect.qq.com/widget/shareqq/index.html?url="+encodeURIComponent(shareShortUrl)+"&desc=&title="+encodeURIComponent(shareTitle)+"&summary="+encodeURIComponent(shareIntro)+"&pics="+sharePic+"&flash=&site=www.kugou.com"});var collectdata=_this.commonConfig();collectdata.action="click",collectdata.b="分享弹窗-分享渠道btn",collectdata.ivar4="QQ好友",collectdata.ivar5=data.hash,collectdata.ivar6=shareTitle,collectdata.a=204;var Loaded=[30032,collectdata];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}_this.shared.close().remove()}),$(".share_qzone").on("click",function(){var newWin=window.open("");data.chl="qzone",_this.hashQueryShortUrl(data,function(res){var shareShortUrl=res.data;""==shareShortUrl||31001==res.err_code?_this.upSupportShare("QQ空间"):"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?window.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(shareShortUrl)+"&title="+shareTitle+"&pics="+sharePic+"&summary="+shareIntro):newWin.location="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(shareShortUrl)+"&title="+shareTitle+"&pics="+sharePic+"&summary="+shareIntro});var collectdata=_this.commonConfig();collectdata.action="click",collectdata.b="分享弹窗-分享渠道btn",collectdata.ivar4="QQ空间",collectdata.ivar5=data.hash,collectdata.ivar6=shareTitle,collectdata.a=204;var Loaded=[30032,collectdata];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}_this.shared.close().remove()}),$(".share_weibo").on("click",function(){var weiboShareIntro;weiboShareIntro=shareIntro.replace("#","%23"),weiboShareIntro=weiboShareIntro.replace("（来自 PC 酷狗音乐）","（ 来自 @酷狗音乐 web版 ）"),weiboShareIntro=encodeURIComponent(weiboShareIntro);var newWin=window.open("");data.chl="weibo",_this.hashQueryShortUrl(data,function(res){var shareShortUrl=res.data;""==shareShortUrl||31001==res.err_code?_this.upSupportShare("微博"):"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?window.open("http://v.t.sina.com.cn/share/share.php?appkey=340086183&pic="+sharePic+"&url="+encodeURIComponent(shareShortUrl)+"&title="+weiboShareIntro):newWin.location="http://v.t.sina.com.cn/share/share.php?appkey=340086183&pic="+sharePic+"&url="+encodeURIComponent(shareShortUrl)+"&title="+weiboShareIntro});var collectdata=_this.commonConfig();collectdata.action="click",collectdata.b="分享弹窗-分享渠道btn",collectdata.ivar4="微博",collectdata.ivar5=data.hash,collectdata.ivar6=shareTitle,collectdata.a=204;var Loaded=[30032,collectdata];apmCollectData.push(Loaded);try{newLogCount()}catch(ex){}_this.shared.close().remove()})},onclose:function(){_this.shared=null}}),_this.shared.show())},upSupportShare:function(msg){var unsupportshare=dialog({id:"unsupportshare",width:200,height:50,title:"不支持分享",skin:"unshare",content:"该歌曲不支持"+msg+"分享"}).show();setTimeout(function(){unsupportshare.close().remove()},2e3)}};$(document).ready(function(){common_header.init(),play.init()}),$(window).unload(function(){$.jStorage.set("playFlag","false"),$.jStorage.set("playdata",null)}),window.onload=function(){if("Mac"==utility.detectOS()){$(".macDownload-left").on("click",function(){window.open("https://itunes.apple.com/cn/app/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90-%E5%B0%B1%E6%98%AF%E6%AD%8C%E5%A4%9A/id658741592?l=en&mt=12","_blank")});var notTransform=!("transform"in document.documentElement.style),$macDownload=$("#macDownload");showT=null,hideT=null,showT=setTimeout(function(){$macDownload.addClass("actived")},1e3),hideT=setTimeout(function(){notTransform?$macDownload.attr("class","macDownload notTransform"):$macDownload.removeClass("actived")},16e3)}};